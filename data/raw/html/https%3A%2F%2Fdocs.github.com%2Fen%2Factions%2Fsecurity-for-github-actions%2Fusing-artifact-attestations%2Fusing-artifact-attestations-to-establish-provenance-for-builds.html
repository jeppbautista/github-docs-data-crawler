<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Security" href="/en/actions/security-for-github-actions">Security</a><span>/</span>
</li>
<li>
<a title="Artifact attestations" href="/en/actions/security-for-github-actions/using-artifact-attestations">Artifact attestations</a><span>/</span>
</li>
<li><a title="Artifact attestations" href="/en/actions/security-for-github-actions/using-artifact-attestations/using-artifact-attestations-to-establish-provenance-for-builds">Artifact attestations</a></li>
</ul></nav></div>
<div>
<div><div><h1>Using artifact attestations to establish provenance for builds</h1></div></div>
<div>
<div><p>Artifact attestations enable you to increase the supply chain security of your builds by establishing where and how your software was built.</p></div>
<div><div>
<div><h2>Who can use this feature?</h2></div>
<div><div><p>Artifact attestations are available in public repositories for all current GitHub plans. They are not available on legacy plans, such as Bronze, Silver, or Gold. If you are on a GitHub Free, GitHub Pro, or GitHub Team plan, artifact attestations are only available for public repositories. To use artifact attestations in private or internal repositories, you must be on a GitHub Enterprise Cloud plan.</p></div></div>
</div></div>
</div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#about-artifact-attestations"><div><span>About artifact attestations</span></div></a></li>
<li><a href="#generating-artifact-attestations-for-your-builds"><div><span>Generating artifact attestations for your builds</span></div></a></li>
<li><a href="#generating-an-attestation-for-a-software-bill-of-materials-sbom"><div><span>Generating an attestation for a software bill of materials (SBOM)</span></div></a></li>
<li><a href="#verifying-artifact-attestations-with-the-github-cli"><div><span>Verifying artifact attestations with the GitHub CLI</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#about-artifact-attestations">About artifact attestations</a></h2>
<p>Artifact attestations enable you to create unfalsifiable provenance and integrity guarantees for the software you build. In turn, people who consume your software can verify where and how your software was built.</p>
<p>When you generate artifact attestations with your software, you create cryptographically signed claims that establish your build's provenance and include the following information:</p>
<ul>
<li>A link to the workflow associated with the artifact.</li>
<li>The repository, organization, environment, commit SHA, and triggering event for the artifact.</li>
<li>Other information from the OIDC token used to establish provenance. For more information, see <a href="/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect">About security hardening with OpenID Connect</a>.</li>
</ul>
<p>You can also generate artifact attestations that include an associated software bill of materials (SBOM). Associating your builds with a list of the open source dependencies used in them provides transparency and enables consumers to comply with data protection standards.</p>
<h3><a href="#about-slsa-levels-for-artifact-attestations">About SLSA levels for artifact attestations</a></h3>
<p>The SLSA framework is an industry standard used to evaluate supply chain security. It is organized into levels. Each level represents an increasing degree of security and trustworthiness for a software supply chain. Artifact attestations by itself provides SLSA v1.0 Build Level 2.</p>
<p>This provides a link between your artifact and its build instructions, but you can take this a step further by requiring builds make use of known, vetted build instructions. A great way to do this is to have your build take place in a reusable workflow that many repositories across your organization share. Reusable workflows can provide isolation between the build process and the calling workflow, to meet SLSA v1.0 Build Level 3. For more information, see <a href="/en/actions/security-guides/using-artifact-attestations-and-reusable-workflows-to-achieve-slsa-v1-build-level-3">Using artifact attestations and reusable workflows to achieve SLSA v1 Build Level 3</a>.</p>
<p>For more information on SLSA levels, see <a href="https://slsa.dev/spec/v1.0/levels">SLSA Security Levels</a>.</p>
<h3><a href="#about-using-sigstore-for-artifact-attestations">About using Sigstore for artifact attestations</a></h3>
<p>To generate artifact attestations, GitHub uses Sigstore, which is an open source project that offers a comprehensive solution for signing and verifying software artifacts via attestations.</p>
<p><strong>Public repositories</strong> that generate artifact attestations use the <a href="https://openssf.org/blog/2023/10/03/running-sigstore-as-a-managed-service-a-tour-of-sigstores-public-good-instance/">Sigstore Public Good Instance</a>. A copy of the generated Sigstore bundle is stored with GitHub and is also written to an immutable transparency log that is publicly readable on the internet.</p>
<p><strong>Private repositories</strong> that generate artifact attestations use GitHub's Sigstore instance. GitHub's Sigstore instance uses the same codebase as the Sigstore Public Good Instance, but it does not have a transparency log and only federates with GitHub Actions.</p>
<h3><a href="#what-to-attest">What to attest</a></h3>
<p>Generating attestations alone doesn't provide any security benefit, the attestations must be verified for the benefit to be realized. Here are some guidelines for how to think about what to sign and how often:</p>
<p>You should sign:</p>
<ul>
<li>Software you are releasing that you expect people to run <code>gh attestation verify ...</code> on.</li>
<li>Binaries people will run, packages people will download, or manifests that include hashes of detailed contents.</li>
</ul>
<p>You should <strong>not</strong> sign:</p>
<ul>
<li>Frequent builds that are just for automated testing.</li>
<li>Individual files like source code, documentation files, or embedded images.</li>
</ul>
<h3><a href="#about-verifying-artifact-attestations">About verifying artifact attestations</a></h3>
<p>If you consume software that publishes artifact attestations, you can use the GitHub CLI to verify those attestations. Because the attestations give you information about where and how software was built, you can use that information to create and enforce security policies that elevate your supply chain security. For more information, see <a href="#verifying-artifact-attestations-with-the-github-cli">Verifying artifact attestations with the GitHub CLI</a>.</p>
<div>
<p>It is important to remember that artifact attestations are <em>not</em> a guarantee that an artifact is secure. Instead, artifact attestations link you to the source code and the build instructions that produced them. It is up to you to define your policy criteria, evaluate that policy by evaluating the content, and make an informed risk decision when you are consuming software.</p>
</div>
<h2><a href="#generating-artifact-attestations-for-your-builds">Generating artifact attestations for your builds</a></h2>
<p>You can use GitHub Actions to generate artifact attestations that establish build provenance for artifacts such as binaries and container images.</p>
<p>To generate an artifact attestation, you must:</p>
<ul>
<li>Ensure you have the appropriate permissions configured in your workflow.</li>
<li>Include a step in your workflow that uses the <a href="https://github.com/actions/attest-build-provenance"><code>attest-build-provenance</code> action</a>.</li>
</ul>
<p>When you run your updated workflows, they will build your artifacts and generate an artifact attestation that establishes build provenance. You can view attestations in your repository's <strong>Actions</strong> tab. For more information, see the <a href="https://github.com/actions/attest-build-provenance"><code>attest-build-provenance</code></a> repository.</p>
<h3><a href="#generating-build-provenance-for-binaries">Generating build provenance for binaries</a></h3>
<ol>
<li>
<p>In the workflow that builds the binary you would like to attest, add the following permissions.</p>
<pre><code><span>permissions:</span>
  <span>id-token:</span> <span>write</span>
  <span>contents:</span> <span>read</span>
  <span>attestations:</span> <span>write</span>
</code></pre>
</li>
<li>
<p>After the step where the binary has been built, add the following step.</p>
<pre><code><span>-</span> <span>name:</span> <span>Generate</span> <span>artifact</span> <span>attestation</span>
  <span>uses:</span> <span>actions/attest-build-provenance@v2</span>
  <span>with:</span>
    <span>subject-path:</span> <span>'PATH/TO/ARTIFACT'</span>
</code></pre>
<p>The value of the <code>subject-path</code> parameter should be set to the path to the binary you want to attest.</p>
</li>
</ol>
<h3><a href="#generating-build-provenance-for-container-images">Generating build provenance for container images</a></h3>
<ol>
<li>
<p>In the workflow that builds the container image you would like to attest, add the following permissions.</p>
<pre><code><span>permissions:</span>
  <span>id-token:</span> <span>write</span>
  <span>contents:</span> <span>read</span>
  <span>attestations:</span> <span>write</span>
  <span>packages:</span> <span>write</span>
</code></pre>
</li>
<li>
<p>After the step where the image has been built, add the following step.</p>
<pre><code><span>-</span> <span>name:</span> <span>Generate</span> <span>artifact</span> <span>attestation</span>
  <span>uses:</span> <span>actions/attest-build-provenance@v2</span>
  <span>with:</span>
    <span>subject-name:</span> <span>${{</span> <span>env.REGISTRY</span> <span>}}/${{</span> <span>env.IMAGE_NAME</span> <span>}}</span>
    <span>subject-digest:</span> <span>'sha256:fedcba0...'</span>
    <span>push-to-registry:</span> <span>true</span>
</code></pre>
<p>The value of the <code>subject-name</code> parameter should specify the fully-qualified image name. For example, <code>ghcr.io/user/app</code> or <code>acme.azurecr.io/user/app</code>. Do not include a tag as part of the image name.</p>
<p>The value of the <code>subject-digest</code> parameter should be set to the SHA256 digest of the subject for the attestation, in the form <code>sha256:HEX_DIGEST</code>. If your workflow uses <code>docker/build-push-action</code>, you can use the <a href="https://github.com/docker/build-push-action?tab=readme-ov-file#outputs"><code>digest</code></a> output from that step to supply the value. For more information on using outputs, see <a href="/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idoutputs">Workflow syntax for GitHub Actions</a>.</p>
</li>
</ol>
<h2><a href="#generating-an-attestation-for-a-software-bill-of-materials-sbom">Generating an attestation for a software bill of materials (SBOM)</a></h2>
<p>You can generate signed SBOM attestations for workflow artifacts.</p>
<p>To generate an attestation for an SBOM, you must:</p>
<ul>
<li>Ensure you have the appropriate permissions configured in your workflow.</li>
<li>Create an SBOM for your artifact. For more information, see <a href="https://github.com/marketplace/actions/anchore-sbom-action"><code>anchore-sbom-action</code></a> in the GitHub Marketplace.</li>
<li>Include a step in your workflow that uses the <a href="https://github.com/actions/attest-sbom"><code>attest-sbom</code> action</a>.</li>
</ul>
<p>When you run your updated workflows, they will build your artifacts and generate an SBOM attestation. You can view attestations in your repository's <strong>Actions</strong> tab. For more information, see the <a href="https://github.com/actions/attest-sbom"><code>attest-sbom</code> action</a> repository.</p>
<h3><a href="#generating-an-sbom-attestation-for-binaries">Generating an SBOM attestation for binaries</a></h3>
<ol>
<li>
<p>In the workflow that builds the binary you would like to attest, add the following permissions.</p>
<pre><code><span>permissions:</span>
  <span>id-token:</span> <span>write</span>
  <span>contents:</span> <span>read</span>
  <span>attestations:</span> <span>write</span>
</code></pre>
</li>
<li>
<p>After the step where the binary has been built, add the following step.</p>
<pre><code><span>-</span> <span>name:</span> <span>Generate</span> <span>SBOM</span> <span>attestation</span>
  <span>uses:</span> <span>actions/attest-sbom@v1</span>
  <span>with:</span>
    <span>subject-path:</span> <span>'PATH/TO/ARTIFACT'</span>
    <span>sbom-path:</span> <span>'PATH/TO/SBOM'</span>
</code></pre>
<p>The value of the <code>subject-path</code> parameter should be set to the path of the binary the SBOM describes. The value of the <code>sbom-path</code> parameter should be set to the path of the SBOM file you generated.</p>
</li>
</ol>
<h3><a href="#generating-an-sbom-attestation-for-container-images">Generating an SBOM attestation for container images</a></h3>
<ol>
<li>
<p>In the workflow that builds the container image you would like to attest, add the following permissions.</p>
<pre><code><span>permissions:</span>
  <span>id-token:</span> <span>write</span>
  <span>contents:</span> <span>read</span>
  <span>attestations:</span> <span>write</span>
  <span>packages:</span> <span>write</span>
</code></pre>
</li>
<li>
<p>After the step where the image has been built, add the following step.</p>
<pre><code><span>-</span> <span>name:</span> <span>Generate</span> <span>SBOM</span> <span>attestation</span>
  <span>uses:</span> <span>actions/attest-sbom@v1</span>
  <span>with:</span>
    <span>subject-name:</span> <span>${{</span> <span>env.REGISTRY</span> <span>}}/PATH/TO/IMAGE</span>
    <span>subject-digest:</span> <span>'sha256:fedcba0...'</span>
    <span>sbom-path:</span> <span>'sbom.json'</span>
    <span>push-to-registry:</span> <span>true</span>
</code></pre>
<p>The value of the <code>subject-name</code> parameter should specify the fully-qualified image name. For example, <code>ghcr.io/user/app</code> or <code>acme.azurecr.io/user/app</code>. Do not include a tag as part of the image name.</p>
<p>The value of the <code>subject-digest</code> parameter should be set to the SHA256 digest of the subject for the attestation, in the form <code>sha256:HEX_DIGEST</code>. If your workflow uses <code>docker/build-push-action</code>, you can use the <a href="https://github.com/docker/build-push-action?tab=readme-ov-file#outputs"><code>digest</code></a> output from that step to supply the value. For more information on using outputs, see <a href="/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idoutputs">Workflow syntax for GitHub Actions</a>.</p>
<p>The value of the <code>sbom-path</code> parameter should be set to the path to the JSON-formatted SBOM file you want to attest.</p>
</li>
</ol>
<h2><a href="#verifying-artifact-attestations-with-the-github-cli">Verifying artifact attestations with the GitHub CLI</a></h2>
<p>You can validate artifact attestations for binaries and container images and validate SBOM attestations using the GitHub CLI. For more information, see the <a href="https://cli.github.com/manual/gh_attestation"><code>attestation</code></a> section of the GitHub CLI manual.</p>
<div>
<p>These commands assume you are in an online environment. If you are in an offline or air-gapped environment, see <a href="/en/actions/security-guides/verifying-attestations-offline">Verifying attestations offline</a>.</p>
</div>
<h3><a href="#verifying-an-artifact-attestation-for-binaries">Verifying an artifact attestation for binaries</a></h3>
<p>To verify artifact attestations for <strong>binaries</strong>, use the following GitHub CLI command.</p>
<div>
<header><span>Bash</span><pre>gh attestation verify PATH/TO/YOUR/BUILD/ARTIFACT-BINARY -R ORGANIZATION_NAME/REPOSITORY_NAME
</pre></header><pre><code>gh attestation verify PATH/TO/YOUR/BUILD/ARTIFACT-BINARY -R ORGANIZATION_NAME/REPOSITORY_NAME
</code></pre>
</div>
<h3><a href="#verifying-an-artifact-attestation-for-container-images">Verifying an artifact attestation for container images</a></h3>
<p>To verify artifact attestations for <strong>container images</strong>, you must provide the image's FQDN prefixed with <code>oci://</code> instead of the path to a binary. You can use the following GitHub CLI command.</p>
<div>
<header><span>Bash</span><pre>docker login ghcr.io

gh attestation verify oci://ghcr.io/ORGANIZATION_NAME/IMAGE_NAME:test -R ORGANIZATION_NAME/REPOSITORY_NAME
</pre></header><pre><code>docker login ghcr.io

gh attestation verify oci://ghcr.io/ORGANIZATION_NAME/IMAGE_NAME:<span>test</span> -R ORGANIZATION_NAME/REPOSITORY_NAME
</code></pre>
</div>
<h3><a href="#verifying-an-attestation-for-sboms">Verifying an attestation for SBOMs</a></h3>
<p>To verify SBOM attestations, you have to provide the <code>--predicate-type</code> flag to reference a non-default predicate. For more information, see <a href="https://github.com/in-toto/attestation/tree/main/spec/predicates#vetted-predicates">Vetted predicates</a> in the <code>in-toto/attestation</code> repository.</p>
<p>For example, the <a href="https://github.com/actions/attest-sbom"><code>attest-sbom</code> action</a> currently supports either SPDX or CycloneDX SBOM predicates. To verify an SBOM attestation in the SPDX format, you can use the following GitHub CLI command.</p>
<div>
<header><span>Bash</span><pre>gh attestation verify PATH/TO/YOUR/BUILD/ARTIFACT-BINARY \
  -R ORGANIZATION_NAME/REPOSITORY_NAME \
  --predicate-type https://spdx.dev/Document/v2.3
</pre></header><pre><code>gh attestation verify PATH/TO/YOUR/BUILD/ARTIFACT-BINARY \
  -R ORGANIZATION_NAME/REPOSITORY_NAME \
  --predicate-type https://spdx.dev/Document/v2.3
</code></pre>
</div>
<p>To view more information on the attestation, reference the <code>--format json</code> flag. This can be especially helpful when reviewing SBOM attestations.</p>
<div>
<header><span>Bash</span><pre>gh attestation verify PATH/TO/YOUR/BUILD/ARTIFACT-BINARY \
  -R ORGANIZATION_NAME/REPOSITORY_NAME \
  --predicate-type https://spdx.dev/Document/v2.3 \
  --format json \
  --jq '.[].verificationResult.statement.predicate'
</pre></header><pre><code>gh attestation verify PATH/TO/YOUR/BUILD/ARTIFACT-BINARY \
  -R ORGANIZATION_NAME/REPOSITORY_NAME \
  --predicate-type https://spdx.dev/Document/v2.3 \
  --format json \
  --jq <span>'.[].verificationResult.statement.predicate'</span>
</code></pre>
</div>
</div></div></div>
</div>
</div></main>
</div></body></html>