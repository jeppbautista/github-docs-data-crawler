<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Use cases and examples" href="/en/actions/use-cases-and-examples">Use cases and examples</a><span>/</span>
</li>
<li>
<a title="Deployment" href="/en/actions/use-cases-and-examples/deploying">Deployment</a><span>/</span>
</li>
<li><a title="Deploying to Azure Static Web App" href="/en/actions/use-cases-and-examples/deploying/deploying-to-azure-static-web-app">Deploying to Azure Static Web App</a></li>
</ul></nav></div>
<div>
<div><div><h1>Deploying to Azure Static Web App</h1></div></div>
<div><div><p>You can deploy your web app to Azure Static Web App as part of your continuous deployment (CD) workflows.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#introduction"><div><span>Introduction</span></div></a></li>
<li><a href="#prerequisites"><div><span>Prerequisites</span></div></a></li>
<li><a href="#creating-the-workflow"><div><span>Creating the workflow</span></div></a></li>
<li><a href="#additional-resources"><div><span>Additional resources</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#introduction">Introduction</a></h2>
<p>This guide explains how to use GitHub Actions to build and deploy a web app to <a href="https://azure.microsoft.com/services/app-service/static/">Azure Static Web Apps</a>.</p>
<div>
<p>
If your GitHub Actions workflows need to access resources from a cloud provider that supports OpenID Connect (OIDC), you can configure your workflows to authenticate directly to the cloud provider. This will let you stop storing these credentials as long-lived secrets and provide other security benefits. For more information, see <a href="/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect">About security hardening with OpenID Connect</a>. and <a href="/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-azure">Configuring OpenID Connect in Azure</a>.</p>
</div>
<h2><a href="#prerequisites">Prerequisites</a></h2>
<p>Before creating your GitHub Actions workflow, you will first need to complete the following setup steps:</p>
<ol>
<li>
<p>Create an Azure Static Web App using the 'Other' option for deployment source. For more information, see <a href="https://docs.microsoft.com/azure/static-web-apps/get-started-portal">Quickstart: Building your first static site in the Azure portal</a> in the Azure documentation.</p>
</li>
<li>
<p>Create a secret called <code>AZURE_STATIC_WEB_APPS_API_TOKEN</code> with the value of your static web app deployment token. For more information about how to find your deployment token, see <a href="https://docs.microsoft.com/azure/static-web-apps/deployment-token-management">Reset deployment tokens in Azure Static Web Apps</a> in the Azure documentation.</p>
</li>
</ol>
<h2><a href="#creating-the-workflow">Creating the workflow</a></h2>
<p>Once you've completed the prerequisites, you can proceed with creating the workflow.</p>
<p>The following example workflow demonstrates how to build and deploy an Azure static web app when there is a push to the <code>main</code> branch or when a pull request targeting <code>main</code> is opened, synchronized, or reopened. The workflow also tears down the corresponding pre-production deployment when a pull request targeting <code>main</code> is closed.</p>
<p>Under the workflow <code>env</code> key, change the following values:</p>
<ul>
<li>
<code>APP_LOCATION</code> to the location of your client code</li>
<li>
<code>API_LOCATION</code> to the location of your API source code. If <code>API_LOCATION</code> is not relevant, you can delete the variable and the lines where it is used.</li>
<li>
<code>OUTPUT_LOCATION</code> to the location of your client code build output</li>
</ul>
<p>For more information about these values, see <a href="https://docs.microsoft.com/azure/static-web-apps/build-configuration?tabs=github-actions">Build configuration for Azure Static Web Apps</a> in the Azure documentation.</p>
<div>
<header><span>YAML</span><pre># This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

# GitHub recommends pinning actions to a commit SHA.
# To get a newer version, you will need to update the SHA.
# You can also reference a tag or branch, but the action may change without warning.

name: Deploy web app to Azure Static Web Apps

env:
  APP_LOCATION: "/" # location of your client code
  API_LOCATION: "api" # location of your api source code - optional
  OUTPUT_LOCATION: "build" # location of client code build output

on:
  push:
    branches:
      - main
  pull_request:
    types: [opened, synchronize, reopened, closed]
    branches:
      - main

permissions:
  issues: write
  contents: read
  pull-requests: write

jobs:
  build_and_deploy:
    if: github.event_name == 'push' || (github.event_name == 'pull_request' &amp;&amp; github.event.action != 'closed')
    runs-on: ubuntu-latest
    name: Build and Deploy
    steps:
      - uses: actions/checkout@v4
        with:
          submodules: true
      - name: Build And Deploy
        uses: Azure/static-web-apps-deploy@1a947af9992250f3bc2e68ad0754c0b0c11566c9
        with:
          azure_static_web_apps_api_token: ${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          action: "upload"
          app_location: ${{ env.APP_LOCATION }}
          api_location: ${{ env.API_LOCATION }}
          output_location: ${{ env.OUTPUT_LOCATION }}

  close_pull_request:
    if: github.event_name == 'pull_request' &amp;&amp; github.event.action == 'closed'
    runs-on: ubuntu-latest
    name: Close Pull Request
    steps:
      - name: Close Pull Request
        uses: Azure/static-web-apps-deploy@1a947af9992250f3bc2e68ad0754c0b0c11566c9
        with:
          azure_static_web_apps_api_token: ${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}
          action: "close"
</pre></header><pre><code><span># This workflow uses actions that are not certified by GitHub.</span>
<span># They are provided by a third-party and are governed by</span>
<span># separate terms of service, privacy policy, and support</span>
<span># documentation.</span>

<span># GitHub recommends pinning actions to a commit SHA.</span>
<span># To get a newer version, you will need to update the SHA.</span>
<span># You can also reference a tag or branch, but the action may change without warning.</span>

<span>name:</span> <span>Deploy</span> <span>web</span> <span>app</span> <span>to</span> <span>Azure</span> <span>Static</span> <span>Web</span> <span>Apps</span>

<span>env:</span>
  <span>APP_LOCATION:</span> <span>"/"</span> <span># location of your client code</span>
  <span>API_LOCATION:</span> <span>"api"</span> <span># location of your api source code - optional</span>
  <span>OUTPUT_LOCATION:</span> <span>"build"</span> <span># location of client code build output</span>

<span>on:</span>
  <span>push:</span>
    <span>branches:</span>
      <span>-</span> <span>main</span>
  <span>pull_request:</span>
    <span>types:</span> [<span>opened</span>, <span>synchronize</span>, <span>reopened</span>, <span>closed</span>]
    <span>branches:</span>
      <span>-</span> <span>main</span>

<span>permissions:</span>
  <span>issues:</span> <span>write</span>
  <span>contents:</span> <span>read</span>
  <span>pull-requests:</span> <span>write</span>

<span>jobs:</span>
  <span>build_and_deploy:</span>
    <span>if:</span> <span>github.event_name</span> <span>==</span> <span>'push'</span> <span>||</span> <span>(github.event_name</span> <span>==</span> <span>'pull_request'</span> <span>&amp;&amp;</span> <span>github.event.action</span> <span>!=</span> <span>'closed'</span><span>)</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>name:</span> <span>Build</span> <span>and</span> <span>Deploy</span>
    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
        <span>with:</span>
          <span>submodules:</span> <span>true</span>
      <span>-</span> <span>name:</span> <span>Build</span> <span>And</span> <span>Deploy</span>
        <span>uses:</span> <span>Azure/static-web-apps-deploy@1a947af9992250f3bc2e68ad0754c0b0c11566c9</span>
        <span>with:</span>
          <span>azure_static_web_apps_api_token:</span> <span>${{</span> <span>secrets.AZURE_STATIC_WEB_APPS_API_TOKEN</span> <span>}}</span>
          <span>repo_token:</span> <span>${{</span> <span>secrets.GITHUB_TOKEN</span> <span>}}</span>
          <span>action:</span> <span>"upload"</span>
          <span>app_location:</span> <span>${{</span> <span>env.APP_LOCATION</span> <span>}}</span>
          <span>api_location:</span> <span>${{</span> <span>env.API_LOCATION</span> <span>}}</span>
          <span>output_location:</span> <span>${{</span> <span>env.OUTPUT_LOCATION</span> <span>}}</span>

  <span>close_pull_request:</span>
    <span>if:</span> <span>github.event_name</span> <span>==</span> <span>'pull_request'</span> <span>&amp;&amp;</span> <span>github.event.action</span> <span>==</span> <span>'closed'</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>name:</span> <span>Close</span> <span>Pull</span> <span>Request</span>
    <span>steps:</span>
      <span>-</span> <span>name:</span> <span>Close</span> <span>Pull</span> <span>Request</span>
        <span>uses:</span> <span>Azure/static-web-apps-deploy@1a947af9992250f3bc2e68ad0754c0b0c11566c9</span>
        <span>with:</span>
          <span>azure_static_web_apps_api_token:</span> <span>${{</span> <span>secrets.AZURE_STATIC_WEB_APPS_API_TOKEN</span> <span>}}</span>
          <span>action:</span> <span>"close"</span>
</code></pre>
</div>
<h2><a href="#additional-resources">Additional resources</a></h2>
<p>The following resources may also be useful:</p>
<ul>
<li>For the original workflow template, see <a href="https://github.com/actions/starter-workflows/blob/main/deployments/azure-staticwebapp.yml"><code>azure-staticwebapp.yml</code></a> in the GitHub Actions <code>starter-workflows</code> repository.</li>
<li>The action used to deploy the web app is the official Azure <a href="https://github.com/Azure/static-web-apps-deploy"><code>Azure/static-web-apps-deploy</code></a> action.</li>
<li>For more examples of GitHub Action workflows that deploy to Azure, see the <a href="https://github.com/Azure/actions-workflow-samples">actions-workflow-samples</a> repository.</li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>