<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Codespaces" href="/en/codespaces">Codespaces</a><span>/</span>
</li>
<li>
<a title="Getting started" href="/en/codespaces/about-codespaces">Getting started</a><span>/</span>
</li>
<li><a title="Deep dive into Codespaces" href="/en/codespaces/about-codespaces/deep-dive">Deep dive into Codespaces</a></li>
</ul></nav></div>
<div>
<div><div><h1>Deep dive into GitHub Codespaces</h1></div></div>
<div><div><p>Explore more detail about how GitHub Codespaces work.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#creating-your-codespace"><div><span>Creating your codespace</span></div></a></li>
<li><a href="#codespaces-lifecycle"><div><span>Codespaces lifecycle</span></div></a></li>
<li><a href="#running-your-application"><div><span>Running your application</span></div></a></li>
<li><a href="#committing-and-pushing-your-changes"><div><span>Committing and pushing your changes</span></div></a></li>
<li><a href="#personalizing-your-codespace-with-extensions"><div><span>Personalizing your codespace with extensions</span></div></a></li>
<li><a href="#about-the-directory-structure-of-a-codespace"><div><span>About the directory structure of a codespace</span></div></a></li>
<li><a href="#further-reading"><div><span>Further reading</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<p>GitHub Codespaces is an instant, cloud-based development environment that uses a container to provide you with common languages, tools, and utilities for development. GitHub Codespaces is also configurable, allowing you to create a customized development environment for your project. By configuring a custom development environment for your project, you can have a repeatable codespace configuration for all users of your project.</p>
<h2><a href="#creating-your-codespace">Creating your codespace</a></h2>
<p>There are a number of entry points to create a codespace.</p>
<ul>
<li>From a GitHub template or any template repository on GitHub to start a new project</li>
<li>From a branch in your repository for new feature work</li>
<li>From an open pull request to explore work-in-progress</li>
<li>From a commit in a repository's history to investigate a bug at a specific point in time</li>
</ul>
<p>You can create a codespace on GitHub, in Visual Studio Code, or by using GitHub CLI.</p>
<p>Your codespace can be ephemeral if you need to test something or you can return to the same codespace to work on long-running feature work.</p>
<p>For more information, see <a href="/en/codespaces/developing-in-a-codespace/creating-a-codespace-for-a-repository">Creating a codespace for a repository</a>, <a href="/en/codespaces/developing-in-a-codespace/creating-a-codespace-from-a-template">Creating a codespace from a template</a>, and <a href="/en/codespaces/developing-in-a-codespace/opening-an-existing-codespace">Opening an existing codespace</a>.</p>
<div>
<p>
You can create more than one codespace per repository or even per branch. However, there are limits to the number of codespaces you can create, and the number of codespaces you can run at the same time. If you reach the maximum number of codespaces and try to create another, a message is displayed telling you that you must remove an existing codespace before you can create a new one.</p>
</div>
<h3><a href="#the-codespace-creation-process">The codespace creation process</a></h3>
<p>When you create a codespace, various steps happen in the background before the codespace is available to you.</p>
<h3><a href="#step-1-vm-and-storage-are-assigned-to-your-codespace">Step 1: VM and storage are assigned to your codespace</a></h3>
<p>When you create a codespace, a virtual machine (VM) is created using either the stable or public preview release of the VM host image. For more information, see <a href="/en/codespaces/setting-your-user-preferences/choosing-the-stable-or-beta-host-image">Choosing the stable or beta host image</a>. The host image defines the version of Linux that is used for the VM. The VM is both dedicated and private to you. Having a dedicated VM ensures that you have the entire set of compute resources from that machine available to you. If necessary, this also allows you to have full root access to your container.</p>
<p>A <a href="https://github.blog/2020-12-21-get-up-to-speed-with-partial-clone-and-shallow-clone/">shallow clone</a> is then made of your repository, or of the template repository if you're creating a codespace from a template. This is cloned into the <code>/workspaces</code> directory of the VM and subsequently mounted into the dev container. For more information, see <a href="#about-the-directory-structure-of-a-codespace">About the directory structure of a codespace</a> below.</p>
<h3><a href="#step-2-dev-container-is-created">Step 2: Dev container is created</a></h3>
<p>GitHub Codespaces uses a Docker container as the development environment. This container is created based on configurations that you can define in a <code>devcontainer.json</code> file and, optionally, a Dockerfile. If you create a codespace from GitHub's blank template, or from a repository with no <code>devcontainer.json</code> file, GitHub Codespaces uses a default image, which has many languages and runtimes available. For more information, see <a href="/en/codespaces/setting-up-your-project-for-codespaces/adding-a-dev-container-configuration/introduction-to-dev-containers">Introduction to dev containers</a>. For details of what the default image for dev containers includes, see the <a href="https://github.com/devcontainers/images/tree/main/src/universal"><code>devcontainers/images</code></a> repository.</p>
<div>
<p>
If you want to use Git hooks in your codespace and apply anything in the <a href="https://git-scm.com/docs/git-init#_template_directory">git template directory</a> to your codespace, then you must set up hooks during step 4 after the container is created.</p>
<p>Since your repository is cloned onto the host VM before the container is created, anything in the <a href="https://git-scm.com/docs/git-init#_template_directory">git template directory</a> will not apply in your codespace unless you set up hooks in your <code>devcontainer.json</code> configuration file using the <code>postCreateCommand</code> in step 4. For more information, see <a href="#step-4-post-creation-setup">Step 4: Post-creation setup</a>.</p>
</div>
<h3><a href="#step-3-connecting-to-the-codespace">Step 3: Connecting to the codespace</a></h3>
<p>When your container has been created and any other initialization has run, you'll be connected to your codespace. You can connect to it by using:</p>
<ul>
<li>Your web browser</li>
<li><a href="/en/codespaces/developing-in-a-codespace/using-github-codespaces-in-visual-studio-code">Visual Studio Code</a></li>
<li><a href="/en/codespaces/developing-in-a-codespace/using-github-codespaces-with-github-cli">GitHub CLI</a></li>
</ul>
<h3><a href="#step-4-post-creation-setup">Step 4: Post-creation setup</a></h3>
<p>Once you are connected to your codespace, your automated setup may continue to build based on the configuration specified in your <code>devcontainer.json</code> file. You may see <code>postCreateCommand</code> and <code>postAttachCommand</code> run.</p>
<p>If you want to use Git hooks in your codespace, set up hooks using the <code>devcontainer.json</code> lifecycle scripts, such as <code>postCreateCommand</code>. For information about the lifecycle scripts, see the <a href="https://containers.dev/implementors/json_reference/#lifecycle-scripts">dev containers specification</a> on the Development Containers website.</p>
<p>If you have a public dotfiles repository for GitHub Codespaces, you can enable it for use with new codespaces. When enabled, your dotfiles will be cloned to the container and the install script will be invoked. For more information, see <a href="/en/codespaces/setting-your-user-preferences/personalizing-github-codespaces-for-your-account#dotfiles">Personalizing GitHub Codespaces for your account</a>.</p>
<p>Finally, if you created the codespace from a repository, the entire history of the repository is copied down with a full clone. If you created the codespace from a template, the full history of the template repository is not preserved; instead, unless you are using the blank template, you will start with an initial commit for the contents of the template repository.</p>
<p>During post-creation setup you'll still be able to use the integrated terminal and make edits to your files, but take care to avoid any race conditions between your work and the commands that are running.</p>
<h2><a href="#codespaces-lifecycle">Codespaces lifecycle</a></h2>
<h3><a href="#saving-files-in-your-codespace">Saving files in your codespace</a></h3>
<p>Save changes to files in the normal way, depending on the editor you are using.</p>
<p>If you work on codespaces in Visual Studio Code, you can enable <a href="https://code.visualstudio.com/docs/editor/codebasics#_save-auto-save">Auto Save</a> to ensure that your changes are always saved.</p>
<h3><a href="#closing-or-stopping-your-codespace">Closing or stopping your codespace</a></h3>
<p>Your codespace will keep running while you are using it, but will time out after a period of inactivity. File changes from the editor and terminal output are counted as activity, so your codespace will not time out if terminal output is continuing. The default inactivity timeout period is 30 minutes. You can define your personal timeout setting for codespaces you create, but this may be overruled by an organization timeout policy. For more information, see <a href="/en/codespaces/setting-your-user-preferences/setting-your-timeout-period-for-github-codespaces">Setting your timeout period for GitHub Codespaces</a>.</p>
<p>If a codespace times out it will stop running, but you can restart it from the browser tab (if you were using the codespace in the browser), from within VS Code, or from your list of codespaces at <a href="https://github.com/codespaces">https://github.com/codespaces</a>.</p>
<p>To stop your codespace you can</p>
<ul>
<li>In the browser: on your list of codespaces at <a href="https://github.com/codespaces">https://github.com/codespaces</a>, click the ellipsis (<strong>...</strong>) to the right of the codespace you want to stop and click <strong>Stop codespace</strong>.</li>
<li>In VS Code: open the Visual Studio Code Command Palette - for example, by pressing <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> (Windows/Linux) or <kbd>Shift</kbd>+<kbd>Command</kbd>+<kbd>P</kbd> (Mac) - type <code>Codespaces: stop</code> then press <kbd>Enter</kbd>. For more information, see <a href="/en/codespaces/reference/using-the-vs-code-command-palette-in-codespaces#suspending-or-stopping-a-codespace">Using the Visual Studio Code Command Palette in GitHub Codespaces</a>.</li>
<li>In a terminal window: use the GitHub CLI command <code>gh codespace stop</code>. For more information, see <a href="/en/codespaces/developing-in-a-codespace/using-github-codespaces-with-github-cli#gh-commands-for-github-codespaces">Using GitHub Codespaces with GitHub CLI</a>.</li>
</ul>
<p>If you exit your codespace without running the stop command (for example, by closing the browser tab), or if you leave the codespace running without interaction, the codespace and its running processes will continue for the duration of the inactivity timeout period.</p>
<p>When you close or stop your codespace, all uncommitted changes are preserved until you connect to the codespace again.</p>
<h2><a href="#running-your-application">Running your application</a></h2>
<p>Port forwarding gives you access to TCP ports running within your codespace. For example, if you're running a web application on port 4000 within your codespace, you can automatically forward that port to make the application accessible from your browser.</p>
<p>Port forwarding determines which ports are made accessible to you from the remote machine. Even if you do not forward a port, that port is still accessible to other processes running inside the codespace itself.</p>
<p><picture><source><img src="/assets/cb-72207/images/help/codespaces/port-forwarding.png" alt="Diagram showing connections, over the internet, between a code editor or a browser on your device and a codespace on the cloud." width="720" height="503"></source></picture></p>
<p>When an application running inside GitHub Codespaces outputs a port to the console, GitHub Codespaces detects the localhost URL pattern and automatically forwards the port. You can click on the URL in the terminal, or the link in the "toast" notification message that pops up at the bottom right corner of VS Code, to open the port in a browser. By default, GitHub Codespaces forwards the port using HTTP. For more information on port forwarding, see <a href="/en/codespaces/developing-in-a-codespace/forwarding-ports-in-your-codespace">Forwarding ports in your codespace</a>.</p>
<p>While ports can be forwarded automatically, they are not publicly accessible to the internet. By default, all ports are private, but you can manually make a port available to your organization or public, and then share access through a URL. For more information, see <a href="/en/codespaces/developing-in-a-codespace/forwarding-ports-in-your-codespace#sharing-a-port">Forwarding ports in your codespace</a>.</p>
<p>Running your application when you first land in your codespace can make for a fast inner dev loop. As you edit, your changes are automatically saved and available on your forwarded port. To view changes, go back to the running application tab in your browser and refresh it.</p>
<h2><a href="#committing-and-pushing-your-changes">Committing and pushing your changes</a></h2>
<p>Git is installed by default in your codespace and so you can rely on your existing Git workflow. You can work with Git in your codespace either via the Terminal or by using the source control features of VS Code.</p>
<p>If you're working with an existing repository, you can create a codespace from any branch, commit, or pull request in the repository, or you can switch to a new or existing branch from within your active codespace. Because GitHub Codespaces is designed to be ephemeral, you can use it as an isolated environment to experiment, check a teammate's pull request, or fix merge conflicts.</p>
<p>If you only have read access to a repository, then you can create a codespace for the repository as long as you can fork it. When you make a commit from the codespace, or push a new branch, GitHub Codespaces either automatically creates a fork of the repository for you, or links the codespace to an existing fork if you already have one for the upstream repository.</p>
<p>If you're working in a codespace created from a template, Git is installed by default, but you will need to publish your codespace to a remote repository to persist your work and to share it with others. If you start from GitHub's blank template, you first need to initialize your workspace as a Git repository (for example by entering <code>git init</code>) to start using source control within the codespace.</p>
<p>For more information, see <a href="/en/codespaces/developing-in-a-codespace/using-source-control-in-your-codespace">Using source control in your codespace</a>.</p>
<div>
<p>
Commits from your codespace will be attributed to the name and public email configured at <a href="https://github.com/settings/profile">https://github.com/settings/profile</a>. A token scoped to the repository, included in the environment as <code>GITHUB_TOKEN</code>, and your GitHub credentials will be used to authenticate.</p>
</div>
<h2><a href="#personalizing-your-codespace-with-extensions">Personalizing your codespace with extensions</a></h2>
<p>You can add extensions within a codespace to personalize your experience in VS Code.</p>
<h3><a href="#vs-code-extensions">VS Code extensions</a></h3>
<p>If you work on your codespaces in the VS Code desktop application, or the web client, you can add any extensions you need from the Visual Studio Code Marketplace. For information on how extensions run in GitHub Codespaces, see <a href="https://code.visualstudio.com/api/advanced-topics/remote-extensions">Supporting Remote Development and GitHub Codespaces</a> in the VS Code documentation.</p>
<p>If you already use VS Code, you can use <a href="https://code.visualstudio.com/docs/editor/settings-sync">Settings Sync</a> to automatically sync extensions, settings, themes, and keyboard shortcuts between your local instance and any codespaces you create.</p>
<h2><a href="#about-the-directory-structure-of-a-codespace">About the directory structure of a codespace</a></h2>
<p>When you create a codespace, your repository is cloned into the <code>/workspaces</code> directory in your codespace. This is a persistent directory that is mounted into the container. Any changes you make inside this directory, including editing, adding, or deleting files, are preserved when you stop and start the codespace, and when you rebuild the container in the codespace.</p>
<p>Outside the <code>/workspaces</code> directory, your codespace contains a Linux directory structure that varies depending on the dev container image used to build your codespace. You can add files or make changes to files outside the <code>/workspaces</code> directory. For example, you can install new programs, or you can set up your shell configuration in a file such as <code>~/.bashrc</code>. As a non-root user, you may not automatically have write access to certain directories, but most images allow root access to these directories with the <code>sudo</code> command.</p>
<p>Outside <code>/workspaces</code>, with the exception of the <code>/tmp</code> directory, the directories in a codespace are tied to the lifecycle of the container. This means any changes you make are preserved when you stop and start your codespace, but are not preserved when you rebuild the container. For more information on the <code>/tmp</code> directory, see <a href="/en/codespaces/developing-in-a-codespace/persisting-environment-variables-and-temporary-files#preventing-temporary-files-from-being-automatically-deleted">Persisting environment variables and temporary files</a>.</p>
<p>Clearing the directories outside <code>/workspaces</code> helps to ensure the rebuilt container is in the same state as it would be in a newly created codespace. If you're rebuilding a container to apply configuration changes to the codespace you're working in, you can be confident that any configuration changes you have made will work the same for users creating new codespaces with the same configuration. For more information, see <a href="/en/codespaces/setting-up-your-project-for-codespaces/adding-a-dev-container-configuration/introduction-to-dev-containers">Introduction to dev containers</a>.</p>
<p>If you want to make changes to your codespace that will be more robust over rebuilds and across different codespaces, you have several options.</p>
<ul>
<li>To install programs and tools in all codespaces created from a repository, in your dev container configuration, you can use lifecycle command properties such as <code>postCreateCommand</code> to run custom installation commands, or you can choose from pre-written installation commands called "features." For more information, see the <a href="https://containers.dev/implementors/json_reference/#lifecycle-scripts">dev containers specification</a> on the Development Containers website and <a href="/en/codespaces/setting-up-your-project-for-codespaces/configuring-dev-containers/adding-features-to-a-devcontainer-file">Adding features to a devcontainer.json file</a>.</li>
<li>To install tools or customize your setup in every codespace you create, such as configuring your <code>bash</code> profile, you can link GitHub Codespaces with a dotfiles repository. The dotfiles repository is also cloned into the persistent <code>/workspaces</code> directory. For more information, see <a href="/en/codespaces/setting-your-user-preferences/personalizing-github-codespaces-for-your-account#dotfiles">Personalizing GitHub Codespaces for your account</a>.</li>
<li>If you want to preserve specific files over a rebuild, you can use a <code>devcontainer.json</code> file to create a symlink between the files and a persistent directory within <code>/workspaces</code>. For more information, see <a href="/en/codespaces/developing-in-a-codespace/rebuilding-the-container-in-a-codespace#persisting-data-over-a-rebuild">Rebuilding the container in a codespace</a>.</li>
</ul>
<h2><a href="#further-reading">Further reading</a></h2>
<ul>
<li><a href="/en/codespaces/managing-codespaces-for-your-organization/enabling-or-disabling-github-codespaces-for-your-organization">Enabling or disabling GitHub Codespaces for your organization</a></li>
<li><a href="/en/codespaces/managing-codespaces-for-your-organization/managing-the-cost-of-github-codespaces-in-your-organization">Managing the cost of GitHub Codespaces in your organization</a></li>
<li><a href="/en/codespaces/setting-up-your-project-for-codespaces/adding-a-dev-container-configuration">Adding a dev container configuration to your repository</a></li>
<li><a href="/en/codespaces/about-codespaces/understanding-the-codespace-lifecycle">Understanding the codespace lifecycle</a></li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>