<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Share automations" href="/en/actions/sharing-automations">Share automations</a><span>/</span>
</li>
<li>
<a title="Create actions" href="/en/actions/sharing-automations/creating-actions">Create actions</a><span>/</span>
</li>
<li><a title="Create a Docker container action" href="/en/actions/sharing-automations/creating-actions/creating-a-docker-container-action">Create a Docker container action</a></li>
</ul></nav></div>
<div>
<div><div><h1>Creating a Docker container action</h1></div></div>
<div><div><p>This guide shows you the minimal steps required to build a Docker container action.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#introduction"><div><span>Introduction</span></div></a></li>
<li><a href="#prerequisites"><div><span>Prerequisites</span></div></a></li>
<li><a href="#creating-a-dockerfile"><div><span>Creating a Dockerfile</span></div></a></li>
<li><a href="#creating-an-action-metadata-file"><div><span>Creating an action metadata file</span></div></a></li>
<li><a href="#writing-the-action-code"><div><span>Writing the action code</span></div></a></li>
<li><a href="#creating-a-readme"><div><span>Creating a README</span></div></a></li>
<li><a href="#commit-tag-and-push-your-action"><div><span>Commit, tag, and push your action</span></div></a></li>
<li><a href="#testing-out-your-action-in-a-workflow"><div><span>Testing out your action in a workflow</span></div></a></li>
<li><a href="#accessing-files-created-by-a-container-action"><div><span>Accessing files created by a container action</span></div></a></li>
<li><a href="#example-docker-container-actions-on-githubcom"><div><span>Example Docker container actions on GitHub.com</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#introduction">Introduction</a></h2>
<p>In this guide, you'll learn about the basic components needed to create and use a packaged Docker container action. To focus this guide on the components needed to package the action, the functionality of the action's code is minimal. The action prints "Hello World" in the logs or "Hello [who-to-greet]" if you provide a custom name.</p>
<p>Once you complete this project, you should understand how to build your own Docker container action and test it in a workflow.</p>
<p>Self-hosted runners must use a Linux operating system and have Docker installed to run Docker container actions. For more information about the requirements of self-hosted runners, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners#requirements-for-self-hosted-runner-machines">About self-hosted runners</a>.</p>
<div>
<p>
When creating workflows and actions, you should always consider whether your code might execute untrusted input from possible attackers. Certain contexts should be treated as untrusted input, as an attacker could insert their own malicious content. For more information, see <a href="/en/actions/security-guides/security-hardening-for-github-actions#understanding-the-risk-of-script-injections">Security hardening for GitHub Actions</a>.</p>
</div>
<h2><a href="#prerequisites">Prerequisites</a></h2>
<ul>
<li>You must create a repository on GitHub and clone it to your workstation. For more information, see <a href="/en/repositories/creating-and-managing-repositories/creating-a-new-repository">Creating a new repository</a> and <a href="/en/repositories/creating-and-managing-repositories/cloning-a-repository">Cloning a repository</a>.</li>
<li>If your repository uses Git LFS, you must include the objects in archives of your repository. For more information, see <a href="/en/enterprise-cloud@latest/repositories/managing-your-repositorys-settings-and-features/managing-repository-settings/managing-git-lfs-objects-in-archives-of-your-repository">Managing Git LFS objects in archives of your repository</a>.</li>
<li>You may find it helpful to have a basic understanding of GitHub Actions, environment variables and the Docker container filesystem. For more information, see <a href="/en/actions/learn-github-actions/variables">Store information in variables</a> and <a href="/en/enterprise-cloud@latest/actions/using-github-hosted-runners/about-github-hosted-runners#docker-container-filesystem">Using GitHub-hosted runners</a>.</li>
</ul>
<h2><a href="#creating-a-dockerfile">Creating a Dockerfile</a></h2>
<p>In your new <code>hello-world-docker-action</code> directory, create a new <code>Dockerfile</code> file. Make sure that your filename is capitalized correctly (use a capital <code>D</code> but not a capital <code>f</code>) if you're having issues. For more information, see <a href="/en/actions/creating-actions/dockerfile-support-for-github-actions">Dockerfile support for GitHub Actions</a>.</p>
<p><strong>Dockerfile</strong></p>
<div>
<header><span>Dockerfile</span><pre># Container image that runs your code
FROM alpine:3.10

# Copies your code file from your action repository to the filesystem path `/` of the container
COPY entrypoint.sh /entrypoint.sh

# Code file to execute when the docker container starts up (`entrypoint.sh`)
ENTRYPOINT ["/entrypoint.sh"]
</pre></header><pre><code><span># Container image that runs your code</span>
<span>FROM</span> alpine:<span>3.10</span>

<span># Copies your code file from your action repository to the filesystem path `/` of the container</span>
<span>COPY</span><span> entrypoint.sh /entrypoint.sh</span>

<span># Code file to execute when the docker container starts up (`entrypoint.sh`)</span>
<span>ENTRYPOINT</span><span> [<span>"/entrypoint.sh"</span>]</span>
</code></pre>
</div>
<h2><a href="#creating-an-action-metadata-file">Creating an action metadata file</a></h2>
<p>Create a new <code>action.yml</code> file in the <code>hello-world-docker-action</code> directory you created above. For more information, see <a href="/en/actions/creating-actions/metadata-syntax-for-github-actions">Metadata syntax for GitHub Actions</a>.</p>
<p><strong>action.yml</strong></p>
<div>
<header><span>YAML</span><pre># action.yml
name: 'Hello World'
description: 'Greet someone and record the time'
inputs:
  who-to-greet:  # id of input
    description: 'Who to greet'
    required: true
    default: 'World'
outputs:
  time: # id of output
    description: 'The time we greeted you'
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.who-to-greet }}
</pre></header><pre><code><span># action.yml</span>
<span>name:</span> <span>'Hello World'</span>
<span>description:</span> <span>'Greet someone and record the time'</span>
<span>inputs:</span>
  <span>who-to-greet:</span>  <span># id of input</span>
    <span>description:</span> <span>'Who to greet'</span>
    <span>required:</span> <span>true</span>
    <span>default:</span> <span>'World'</span>
<span>outputs:</span>
  <span>time:</span> <span># id of output</span>
    <span>description:</span> <span>'The time we greeted you'</span>
<span>runs:</span>
  <span>using:</span> <span>'docker'</span>
  <span>image:</span> <span>'Dockerfile'</span>
  <span>args:</span>
    <span>-</span> <span>${{</span> <span>inputs.who-to-greet</span> <span>}}</span>
</code></pre>
</div>
<p>This metadata defines one <code>who-to-greet</code> input and one <code>time</code> output parameter. To pass inputs to the Docker container, you should declare the input using <code>inputs</code> and pass the input in the <code>args</code> keyword. Everything you include in <code>args</code> is passed to the container, but for better discoverability for users of your action, we recommended using inputs.</p>
<p>GitHub will build an image from your <code>Dockerfile</code>, and run commands in a new container using this image.</p>
<h2><a href="#writing-the-action-code">Writing the action code</a></h2>
<p>You can choose any base Docker image and, therefore, any language for your action. The following shell script example uses the <code>who-to-greet</code> input variable to print "Hello [who-to-greet]" in the log file.</p>
<p>Next, the script gets the current time and sets it as an output variable that actions running later in a job can use. In order for GitHub to recognize output variables, you must write them to the <code>$GITHUB_OUTPUT</code> environment file: <code>echo "&lt;output name&gt;=&lt;value&gt;" &gt;&gt; $GITHUB_OUTPUT</code>. For more information, see <a href="/en/actions/using-workflows/workflow-commands-for-github-actions#setting-an-output-parameter">Workflow commands for GitHub Actions</a>.</p>
<ol>
<li>
<p>Create a new <code>entrypoint.sh</code> file in the <code>hello-world-docker-action</code> directory.</p>
</li>
<li>
<p>Add the following code to your <code>entrypoint.sh</code> file.</p>
<p><strong>entrypoint.sh</strong></p>
<div>
<header><span>Shell</span><pre>#!/bin/sh -l

echo "Hello $1"
time=$(date)
echo "time=$time" &gt;&gt; $GITHUB_OUTPUT

</pre></header><pre><code><span>#</span><span>!/bin/sh -l</span>

echo "Hello $1"
time=$(date)
echo "time=$time" &gt;&gt; $GITHUB_OUTPUT

</code></pre>
</div>
<p>If <code>entrypoint.sh</code> executes without any errors, the action's status is set to <code>success</code>. You can also explicitly set exit codes in your action's code to provide an action's status. For more information, see <a href="/en/actions/creating-actions/setting-exit-codes-for-actions">Setting exit codes for actions</a>.</p>
</li>
<li>
<p>Make your <code>entrypoint.sh</code> file executable. Git provides a way to explicitly change the permission mode of a file so that it doesnâ€™t get reset every time there is a clone/fork.</p>
<div>
<header><span>Shell</span><pre>git add entrypoint.sh
git update-index --chmod=+x entrypoint.sh
</pre></header><pre><code>git add entrypoint.sh
git update-index --chmod=+x entrypoint.sh
</code></pre>
</div>
</li>
<li>
<p>Optionally, to check the permission mode of the file in the git index, run the following command.</p>
<div>
<header><span>Shell</span><pre>git ls-files --stage entrypoint.sh
</pre></header><pre><code>git ls-files --stage entrypoint.sh
</code></pre>
</div>
<p>An output like <code>100755 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0       entrypoint.sh</code> means the file has the executable permission. In this example, <code>755</code> denotes the executable permission.</p>
</li>
</ol>
<h2><a href="#creating-a-readme">Creating a README</a></h2>
<p>To let people know how to use your action, you can create a README file. A README is most helpful when you plan to share your action publicly, but is also a great way to remind you or your team how to use the action.</p>
<p>In your <code>hello-world-docker-action</code> directory, create a <code>README.md</code> file that specifies the following information:</p>
<ul>
<li>A detailed description of what the action does.</li>
<li>Required input and output arguments.</li>
<li>Optional input and output arguments.</li>
<li>Secrets the action uses.</li>
<li>Environment variables the action uses.</li>
<li>An example of how to use your action in a workflow.</li>
</ul>
<p><strong>README.md</strong></p>
<div>
<header><span>Markdown</span><pre># Hello world docker action

This action prints "Hello World" or "Hello" + the name of a person to greet to the log.

## Inputs

## `who-to-greet`

**Required** The name of the person to greet. Default `"World"`.

## Outputs

## `time`

The time we greeted you.

## Example usage

uses: actions/hello-world-docker-action@v2
with:
  who-to-greet: 'Mona the Octocat'
</pre></header><pre><code><span># Hello world docker action</span>

This action prints "Hello World" or "Hello" + the name of a person to greet to the log.

<span>## Inputs</span>

<span>## `who-to-greet`</span>

<span>**Required**</span> The name of the person to greet. Default <span>`"World"`</span>.

<span>## Outputs</span>

<span>## `time`</span>

The time we greeted you.

<span>## Example usage</span>

uses: actions/hello-world-docker-action@v2
with:
  who-to-greet: 'Mona the Octocat'
</code></pre>
</div>
<h2><a href="#commit-tag-and-push-your-action">Commit, tag, and push your action</a></h2>
<p>From your terminal, commit your <code>action.yml</code>, <code>entrypoint.sh</code>, <code>Dockerfile</code>, and <code>README.md</code> files.</p>
<p>It's best practice to also add a version tag for releases of your action. For more information on versioning your action, see <a href="/en/actions/creating-actions/about-custom-actions#using-release-management-for-actions">About custom actions</a>.</p>
<div>
<header><span>Shell</span><pre>git add action.yml entrypoint.sh Dockerfile README.md
git commit -m "My first action is ready"
git tag -a -m "My first action release" v1
git push --follow-tags
</pre></header><pre><code>git add action.yml entrypoint.sh Dockerfile README.md
git commit -m "My first action is ready"
git tag -a -m "My first action release" v1
git push --follow-tags
</code></pre>
</div>
<h2><a href="#testing-out-your-action-in-a-workflow">Testing out your action in a workflow</a></h2>
<p>Now you're ready to test your action out in a workflow.</p>
<ul>
<li>When an action is in a private repository, you can control who can access it. For more information, see <a href="/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository#allowing-access-to-components-in-a-private-repository">Managing GitHub Actions settings for a repository</a>.</li>
<li>When an action is in an internal repository, the action can only be used in workflows in the same repository.</li>
<li>Public actions can be used by workflows in any repository.</li>
</ul>
<h3><a href="#example-using-a-public-action">Example using a public action</a></h3>
<p>The following workflow code uses the completed <em>hello world</em> action in the public <a href="https://github.com/actions/hello-world-docker-action"><code>actions/hello-world-docker-action</code></a> repository. Copy the following workflow example code into a <code>.github/workflows/main.yml</code> file, but replace the <code>actions/hello-world-docker-action</code> with your repository and action name. You can also replace the <code>who-to-greet</code> input with your name. Public actions can be used even if they're not published to GitHub Marketplace. For more information, see <a href="/en/actions/creating-actions/publishing-actions-in-github-marketplace#publishing-an-action">Publishing actions in GitHub Marketplace</a>.</p>
<p><strong>.github/workflows/main.yml</strong></p>
<div>
<header><span>YAML</span><pre>on: [push]

jobs:
  hello_world_job:
    runs-on: ubuntu-latest
    name: A job to say hello
    steps:
      - name: Hello world action step
        id: hello
        uses: actions/hello-world-docker-action@v2
        with:
          who-to-greet: 'Mona the Octocat'
      # Use the output from the `hello` step
      - name: Get the output time
        run: echo "The time was ${{ steps.hello.outputs.time }}"
</pre></header><pre><code><span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>hello_world_job:</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>name:</span> <span>A</span> <span>job</span> <span>to</span> <span>say</span> <span>hello</span>
    <span>steps:</span>
      <span>-</span> <span>name:</span> <span>Hello</span> <span>world</span> <span>action</span> <span>step</span>
        <span>id:</span> <span>hello</span>
        <span>uses:</span> <span>actions/hello-world-docker-action@v2</span>
        <span>with:</span>
          <span>who-to-greet:</span> <span>'Mona the Octocat'</span>
      <span># Use the output from the `hello` step</span>
      <span>-</span> <span>name:</span> <span>Get</span> <span>the</span> <span>output</span> <span>time</span>
        <span>run:</span> <span>echo</span> <span>"The time was $<span>{{ steps.hello.outputs.time }}</span>"</span>
</code></pre>
</div>
<h3><a href="#example-using-a-private-action">Example using a private action</a></h3>
<p>Copy the following example workflow code into a <code>.github/workflows/main.yml</code> file in your action's repository. You can also replace the <code>who-to-greet</code> input with your name. This private action can't be published to GitHub Marketplace, and can only be used in this repository.</p>
<p><strong>.github/workflows/main.yml</strong></p>
<div>
<header><span>YAML</span><pre>on: [push]

jobs:
  hello_world_job:
    runs-on: ubuntu-latest
    name: A job to say hello
    steps:
      # To use this repository's private action,
      # you must check out the repository
      - name: Checkout
        uses: actions/checkout@v4
      - name: Hello world action step
        uses: ./ # Uses an action in the root directory
        id: hello
        with:
          who-to-greet: 'Mona the Octocat'
      # Use the output from the `hello` step
      - name: Get the output time
        run: echo "The time was ${{ steps.hello.outputs.time }}"
</pre></header><pre><code><span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>hello_world_job:</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>name:</span> <span>A</span> <span>job</span> <span>to</span> <span>say</span> <span>hello</span>
    <span>steps:</span>
      <span># To use this repository's private action,</span>
      <span># you must check out the repository</span>
      <span>-</span> <span>name:</span> <span>Checkout</span>
        <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>name:</span> <span>Hello</span> <span>world</span> <span>action</span> <span>step</span>
        <span>uses:</span> <span>./</span> <span># Uses an action in the root directory</span>
        <span>id:</span> <span>hello</span>
        <span>with:</span>
          <span>who-to-greet:</span> <span>'Mona the Octocat'</span>
      <span># Use the output from the `hello` step</span>
      <span>-</span> <span>name:</span> <span>Get</span> <span>the</span> <span>output</span> <span>time</span>
        <span>run:</span> <span>echo</span> <span>"The time was $<span>{{ steps.hello.outputs.time }}</span>"</span>
</code></pre>
</div>
<p>From your repository, click the <strong>Actions</strong> tab, and select the latest workflow run. Under <strong>Jobs</strong> or in the visualization graph, click <strong>A job to say hello</strong>.</p>
<p>Click <strong>Hello world action step</strong>, and you should see "Hello Mona the Octocat" or the name you used for the <code>who-to-greet</code> input printed in the log. To see the timestamp, click <strong>Get the output time</strong>.</p>
<h2><a href="#accessing-files-created-by-a-container-action">Accessing files created by a container action</a></h2>
<p>When a container action runs, it will automatically map the default working directory (<code>GITHUB_WORKSPACE</code>) on the runner with the <code>/github/workspace</code> directory on the container. Any files added to this directory on the container will be available to any subsequent steps in the same job. For example, if you have a container action that builds your project, and you would like to upload the build output as an artifact, you can use the following steps.</p>
<p><strong>workflow.yml</strong></p>
<div>
<header><span>YAML</span><pre>jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      # Output build artifacts to /github/workspace on the container.
      - name: Containerized Build
        uses: ./.github/actions/my-container-action

      - name: Upload Build Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: workspace_artifacts
          path: ${{ github.workspace }}
</pre></header><pre><code><span>jobs:</span>
  <span>build:</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>steps:</span>
      <span>-</span> <span>name:</span> <span>Checkout</span>
        <span>uses:</span> <span>actions/checkout@v4</span>

      <span># Output build artifacts to /github/workspace on the container.</span>
      <span>-</span> <span>name:</span> <span>Containerized</span> <span>Build</span>
        <span>uses:</span> <span>./.github/actions/my-container-action</span>

      <span>-</span> <span>name:</span> <span>Upload</span> <span>Build</span> <span>Artifacts</span>
        <span>uses:</span> <span>actions/upload-artifact@v4</span>
        <span>with:</span>
          <span>name:</span> <span>workspace_artifacts</span>
          <span>path:</span> <span>${{</span> <span>github.workspace</span> <span>}}</span>
</code></pre>
</div>
<p>For more information about uploading build output as an artifact, see <a href="/en/actions/using-workflows/storing-workflow-data-as-artifacts">Storing and sharing data from a workflow</a>.</p>
<h2><a href="#example-docker-container-actions-on-githubcom">Example Docker container actions on GitHub.com</a></h2>
<p>You can find many examples of Docker container actions on GitHub.com.</p>
<ul>
<li><a href="https://github.com/github/issue-metrics">github/issue-metrics</a></li>
<li><a href="https://github.com/microsoft/infersharpaction">microsoft/infersharpaction</a></li>
<li><a href="https://github.com/microsoft/ps-docs">microsoft/ps-docs</a></li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>