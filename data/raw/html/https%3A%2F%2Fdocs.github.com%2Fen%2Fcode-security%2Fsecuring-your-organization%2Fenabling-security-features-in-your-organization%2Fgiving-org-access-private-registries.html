<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Secure coding" href="/en/code-security">Secure coding</a><span>/</span>
</li>
<li>
<a title="Secure your organization" href="/en/code-security/securing-your-organization">Secure your organization</a><span>/</span>
</li>
<li>
<a title="Enable security features" href="/en/code-security/securing-your-organization/enabling-security-features-in-your-organization">Enable security features</a><span>/</span>
</li>
<li><a title="Give access to private registries" href="/en/code-security/securing-your-organization/enabling-security-features-in-your-organization/giving-org-access-private-registries">Give access to private registries</a></li>
</ul></nav></div>
<div>
<div><div><h1>Giving security features access to private registries</h1></div></div>
<div><div><p>If your organization uses private registries, you can improve the results of code scanning analysis and enable Dependabot to maintain more dependencies by setting up access to these registries.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#about-the-importance-of-providing-access-to-private-registries"><div><span>About the importance of providing access to private registries</span></div></a></li>
<li><a href="#code-scanning-default-setup-access-to-private-registries"><div><span>Code scanning default setup access to private registries</span></div></a></li>
<li><a href="#code-scanning-advanced-setup-access-to-private-registries"><div><span>Code scanning advanced setup access to private registries</span></div></a></li>
<li><a href="#dependabot-updates-access-to-private-registries"><div><span>Dependabot updates access to private registries</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#about-the-importance-of-providing-access-to-private-registries">About the importance of providing access to private registries</a></h2>
<p>When a repository uses code stored in a private registry, some security features need access to the registry to enable them to work effectively. Without access to all the dependencies of a repository, code scanning default setup and Dependabot are limited.</p>
<h2><a href="#code-scanning-default-setup-access-to-private-registries">Code scanning default setup access to private registries</a></h2>
<p>Code scanning default setup analyzes C# and Java code without building it. If you do not define access to the private registries your organization uses, then code scanning will only gather necessary data from dependencies available in public registries. Most times, this is enough for surfacing most of the vulnerabilities. However, in some cases the lack of access can lead to false negative results, that is, code scanning is unable to detect a vulnerability in the code because it does not have all the information it needs to analyze the code. For example, some of the data flow paths may not be detected because steps are defined in dependencies that are not accessible and code scanning does not know how to interpret them.</p>
<p>When you configure access to the private registries used in your organization, code scanning has access to all the information it needs and is much less likely to miss a vulnerability.</p>
<div>
<p>
You can define one private Maven registry and one private NuGet feed for each organization. If the codebases in your organization use more than one registry or feed, you should define access to the most important registry for the codebases in that organization.</p>
</div>
<h3><a href="#defining-registry-access-for-code-scanning-default-setup">Defining registry access for code scanning default setup</a></h3>
<p>You need to be an <strong>organization owner</strong> to set up access to private registries in the user interface. You can also use the REST API with organization owner or <code>{read,write}_org_private_registries</code> permission.</p>
<ol>
<li>On the <strong>Settings</strong> tab for the organization, scroll down to the "Security" section and select <strong>Secrets and variables</strong>.</li>
<li>In the expanded list of secrets and variables, select <strong>Private registries</strong> to display the "Private Registries" page.</li>
<li>Select <strong>New private registry</strong> to add access details for a private registry.</li>
<li>Use the <strong>URL</strong> and <strong>Type</strong> fields to define the location and type of the registry:
<ul>
<li>
<strong>URL</strong> is the location where you access the private registry. For example, to use the GitHub Packages registry for NuGet: <code>https://nuget.pkg.github.com/</code>.</li>
<li>
<strong>Type</strong> is the type of registry.</li>
</ul>
</li>
<li>Select either <strong>Token</strong> or <strong>Username and password</strong>, depending on the authentication method, then enter data into the appropriate fields.</li>
<li>Define which repositories in the organization can access the private registry using these details: all, private and internal, or selected repositories only.</li>
<li>When you have finished defining the private registry, select <strong>Add Registry</strong> to save the registry information.</li>
</ol>
<div>
<p>
When you add a private registry to an organization the token or password is stored as an encrypted secret. Once the registry is created, the token or password cannot be viewed again.</p>
</div>
<h3><a href="#enabling-code-scanning-default-setup-to-use-a-registry-definition">Enabling code scanning default setup to use a registry definition</a></h3>
<p>When you enable code scanning default setup for a repository or group of repositories, GitHub checks whether the repositories have access to any existing private registries. If any private registries are available to a repository, code scanning will use the relevant definitions during analysis.</p>
<p>When configuring private registries for the first time, you need to disable and re-enable code scanning default setup for any repositories that you want to use the new definition. New or modified configurations will be automatically picked up on subsequent runs.</p>
<p>You can confirm whether private registries were used successfully by code scanning analysis by looking in the Actions log files, see <a href="/en/code-security/code-scanning/managing-your-code-scanning-configuration/viewing-code-scanning-logs#determining-whether-code-scanning-default-setup-used-any-private-registries">Determining whether code scanning default setup used any private registries</a>.</p>
<h2><a href="#code-scanning-advanced-setup-access-to-private-registries">Code scanning advanced setup access to private registries</a></h2>
<p>Code scanning advanced setup uses any private registries available to the workflow that runs the analysis using the <code>codeql-action</code>. It does not have access to the organization-level private registries used by default setup.</p>
<p>For compiled languages, the <code>codeql-action</code> must observe a build of the code. You can either revise your existing build workflow to also run the <code>codeql-action</code> or create a new workflow that builds the production version of the code and also runs the <code>codeql-action</code>.</p>
<p>Any private registries used by the build must also be accessible to the workflow that runs the <code>codeql-action</code>. For more information on advanced setup, see <a href="/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/configuring-advanced-setup-for-code-scanning#configuring-advanced-setup-for-code-scanning-with-codeql">Configuring advanced setup for code scanning</a>.</p>
<h2><a href="#dependabot-updates-access-to-private-registries">Dependabot updates access to private registries</a></h2>
<p>Dependabot uses any private registries defined in the <code>dependabot.yml</code> file. It does not have access to the organization-level private registries used by code scanning default setup.</p>
<p>Dependabot cannot check for security or version updates for code stored in a private registry unless it can access the registry. If you do not configure access to the private registry, then Dependabot cannot raise pull requests to update any of the dependencies stored in the registry.</p>
<p>When you configure access to one or more private registries, Dependabot can propose pull requests to upgrade a vulnerable dependency or to maintain a dependency, see <a href="/en/code-security/dependabot/working-with-dependabot/configuring-access-to-private-registries-for-dependabot">Configuring access to private registries for Dependabot</a> and <a href="/en/code-security/dependabot/working-with-dependabot/guidance-for-the-configuration-of-private-registries-for-dependabot">Guidance for the configuration of private registries for Dependabot</a>.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>