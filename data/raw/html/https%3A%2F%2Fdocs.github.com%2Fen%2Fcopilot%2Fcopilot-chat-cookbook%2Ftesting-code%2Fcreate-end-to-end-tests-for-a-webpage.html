<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Copilot" href="/en/copilot">GitHub Copilot</a><span>/</span>
</li>
<li>
<a title="Copilot Chat Cookbook" href="/en/copilot/copilot-chat-cookbook">Copilot Chat Cookbook</a><span>/</span>
</li>
<li>
<a title="Testing code" href="/en/copilot/copilot-chat-cookbook/testing-code">Testing code</a><span>/</span>
</li>
<li><a title="Create end-to-end tests" href="/en/copilot/copilot-chat-cookbook/testing-code/create-end-to-end-tests-for-a-webpage">Create end-to-end tests</a></li>
</ul></nav></div>
<div>
<div><div><h1>Create end-to-end tests for a webpage</h1></div></div>
<div><div><p>Copilot Chat can help with generating end-to-end tests.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#example-scenario"><div><span>Example scenario</span></div></a></li>
<li><a href="#example-prompt"><div><span>Example prompt</span></div></a></li>
<li><a href="#example-response"><div><span>Example response</span></div></a></li>
<li><a href="#further-reading"><div><span>Further reading</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<p>Creating end-to-end tests for a webpage can be time-consuming and complex as the HTML will be generated dynamically. Copilot Chat can help you create end-to-end tests for a webpage by suggesting the necessary code to interact with the webpage and validate the expected results.</p>
<h2><a href="#example-scenario">Example scenario</a></h2>
<p>Imagine a React application that displays product details on a webpage. You need to create end-to-end tests to ensure the product details are displayed correctly. You can ask Copilot Chat to generate these tests for you.</p>
<pre><code><span>import</span> <span>React</span>, { useState, useEffect } <span>from</span> <span>'react'</span>;
<span>import</span> <span>PropTypes</span> <span>from</span> <span>'prop-types'</span>;

<span>const</span> <span>ProductDetails</span> = (<span>{ productId = <span>'1'</span> }</span>) =&gt; {
  <span>const</span> [product, setProduct] = <span>useState</span>(<span>null</span>);
  <span>const</span> [loading, setLoading] = <span>useState</span>(<span>true</span>);
  <span>const</span> [error, setError] = <span>useState</span>(<span>null</span>);

  <span>useEffect</span>(<span>() =&gt;</span> {
    <span>const</span> <span>fetchProduct</span> = <span>async</span> (<span>try</span> {
        <span>const</span> response = <span>await</span> <span>fetch</span>(<span>`/api/product/<span>${productId}</span>`</span>);
        <span>if</span> (!response.<span>ok</span>) {
          <span>throw</span> <span>new</span> <span>Error</span>(<span>'Product not found'</span>);
        }
        <span>const</span> data = <span>await</span> response.<span>json</span>();
        <span>setProduct</span>(data);
        <span>setLoading</span>(<span>false</span>);
      } <span>catch</span> (err) {
        <span>setError</span>(err.<span>message</span>);
        <span>setLoading</span>(<span>false</span>);
      }
    };

    <span>fetchProduct</span>();
    <span>return</span>;
  }, [productId]); <span>// Add productId to dependency array</span>

  <span>if</span> (loading) <span>return</span> <span><span>&lt;<span>div</span>&gt;</span>Loading...<span>&lt;/<span>div</span>&gt;</span></span>;
  <span>if</span> (error) <span>return</span> <span><span>&lt;<span>div</span>&gt;</span>Error: {error}<span>&lt;/<span>div</span>&gt;</span></span>;

  <span>return</span> (
    <span><span>&lt;<span>div</span>&gt;</span>
      {product &amp;&amp; (
        <span>&lt;<span>div</span>&gt;</span>
          <span>&lt;<span>h2</span>&gt;</span>{product.name}<span>&lt;/<span>h2</span>&gt;</span>
          <span>&lt;<span>p</span>&gt;</span>{product.description}<span>&lt;/<span>p</span>&gt;</span>
          <span>&lt;<span>p</span>&gt;</span>Price: ${product.price}<span>&lt;/<span>p</span>&gt;</span>
        <span>&lt;/<span>div</span>&gt;</span>
      )}
    <span>&lt;/<span>div</span>&gt;</span></span>
  );
};

<span>ProductDetails</span>.<span>propTypes</span> = {
  <span>productId</span>: <span>PropTypes</span>.<span>string</span>
};

<span>export</span> <span>default</span> <span>ProductDetails</span>;
</code></pre>
<h2><a href="#example-prompt">Example prompt</a></h2>
<div>
<p> This example uses Playwright for end-to-end testing, but you can use other frameworks like Selenium or Cypress.</p>
</div>
<p><code>Using Playwright, generate an e2e test to ensure the product displays correctly.</code></p>
<p>If you have an existing test you wish Copilot to use as a model, you can use <code>#file: path/to/test-file.js</code> to provide the path to the file, and include this information in the prompt.</p>
<h2><a href="#example-response">Example response</a></h2>
<div>
<p> The following response is an example. Copilot Chat responses are non-deterministic, so you may get a different response from the one shown here.</p>
</div>
<p>Copilot will respond with an end-to-end test that you can use for your application.</p>
<pre><code><span>import</span> { test, expect } <span>from</span> <span>'@playwright/test'</span>;

test.<span>describe</span>(<span>'ProductDetails Component'</span>, <span>() =&gt;</span> {
  test.<span>beforeEach</span>(<span>async</span> ({ page }) =&gt; {
    <span>// Set up API mocking</span>
    <span>await</span> page.<span>route</span>(<span>'/api/product/1'</span>, <span>async</span> (route) =&gt; {
      <span>await</span> route.<span>fulfill</span>({
        <span>status</span>: <span>200</span>,
        <span>contentType</span>: <span>'application/json'</span>,
        <span>body</span>: <span>JSON</span>.<span>stringify</span>({
          <span>name</span>: <span>'Test Product'</span>,
          <span>description</span>: <span>'This is a test product'</span>,
          <span>price</span>: <span>99.99</span>
        })
      });
    });

    <span>// Mock error response for product ID 999</span>
    <span>await</span> page.<span>route</span>(<span>'/api/product/999'</span>, <span>async</span> (route) =&gt; {
      <span>await</span> route.<span>fulfill</span>({
        <span>status</span>: <span>404</span>,
        <span>contentType</span>: <span>'application/json'</span>,
        <span>body</span>: <span>JSON</span>.<span>stringify</span>({ <span>error</span>: <span>'Product not found'</span> })
      });
    });
  });

  <span>test</span>(<span>'displays loading state initially'</span>, <span>async</span> ({ page }) =&gt; {
    <span>await</span> page.<span>goto</span>(<span>'/product/1'</span>);
    <span>const</span> loadingElement = page.<span>locator</span>(<span>'text=Loading...'</span>);
    <span>await</span> <span>expect</span>(loadingElement).<span>toBeVisible</span>();
  });

  <span>test</span>(<span>'displays product details correctly'</span>, <span>async</span> ({ page }) =&gt; {
    <span>await</span> page.<span>goto</span>(<span>'/product/1'</span>);

    <span>// Wait for loading to disappear</span>
    <span>await</span> <span>expect</span>(page.<span>getByText</span>(<span>'Loading...'</span>)).<span>toBeHidden</span>();

    <span>// Check all product details</span>
    <span>await</span> <span>expect</span>(page.<span>locator</span>(<span>'h2'</span>)).<span>toHaveText</span>(<span>'Test Product'</span>);
    <span>await</span> <span>expect</span>(page.<span>locator</span>(<span>'text=This is a test product'</span>)).<span>toBeVisible</span>();
    <span>await</span> <span>expect</span>(page.<span>locator</span>(<span>'text=Price: $99.99'</span>)).<span>toBeVisible</span>();
  });

  <span>test</span>(<span>'displays error message when product not found'</span>, <span>async</span> ({ page }) =&gt; {
    <span>await</span> page.<span>goto</span>(<span>'/product/999'</span>);

    <span>// Wait for loading to disappear</span>
    <span>await</span> <span>expect</span>(page.<span>getByText</span>(<span>'Loading...'</span>)).<span>toBeHidden</span>();

    <span>// Check error message</span>
    <span>await</span> <span>expect</span>(page.<span>locator</span>(<span>'text=Error: Product not found'</span>)).<span>toBeVisible</span>();
  });
});
</code></pre>
<h2><a href="#further-reading">Further reading</a></h2>
<ul>
<li><a href="/en/copilot/using-github-copilot/prompt-engineering-for-github-copilot">Prompt engineering for Copilot Chat</a></li>
<li><a href="/en/copilot/using-github-copilot/best-practices-for-using-github-copilot">Best practices for using GitHub Copilot</a></li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>