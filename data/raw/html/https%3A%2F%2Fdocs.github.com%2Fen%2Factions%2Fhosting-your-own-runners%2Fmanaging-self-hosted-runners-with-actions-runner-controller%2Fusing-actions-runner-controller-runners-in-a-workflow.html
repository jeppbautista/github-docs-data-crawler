<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Self-hosted runners" href="/en/actions/hosting-your-own-runners">Self-hosted runners</a><span>/</span>
</li>
<li>
<a title="Actions Runner Controller" href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller">Actions Runner Controller</a><span>/</span>
</li>
<li><a title="Using ARC in a workflow" href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/using-actions-runner-controller-runners-in-a-workflow">Using ARC in a workflow</a></li>
</ul></nav></div>
<div>
<div><div><h1>Using Actions Runner Controller runners in a workflow</h1></div></div>
<div><div><p>You can use Actions Runner Controller runners in a workflow file.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#about-using-arc-runners-in-a-workflow-file"><div><span>About using ARC runners in a workflow file</span></div></a></li>
<li><a href="#using-runner-scale-set-names"><div><span>Using runner scale set names</span></div></a></li>
<li><a href="#legal-notice"><div><span>Legal notice</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<p><a href="#legal-notice">Legal notice</a></p>
<h2><a href="#about-using-arc-runners-in-a-workflow-file">About using ARC runners in a workflow file</a></h2>
<p>To assign jobs to run on a runner scale set, you can specify the name of the scale set as the value for the <code>runs-on</code> key in your GitHub Actions workflow file.</p>
<p>For example, the following configuration for a runner scale set has the <code>INSTALLATION_NAME</code> value set to <code>arc-runner-set</code>.</p>
<pre><code><span># Using a Personal Access Token (PAT)</span>
INSTALLATION_NAME=<span>"arc-runner-set"</span>
NAMESPACE=<span>"arc-runners"</span>
GITHUB_CONFIG_URL=<span>"https://github.com/&lt;your_enterprise/org/repo&gt;"</span>
GITHUB_PAT=<span>"&lt;PAT&gt;"</span>
helm install <span>"<span>${INSTALLATION_NAME}</span>"</span> \
    --namespace <span>"<span>${NAMESPACE}</span>"</span> \
    --create-namespace \
    --<span>set</span> githubConfigUrl=<span>"<span>${GITHUB_CONFIG_URL}</span>"</span> \
    --<span>set</span> githubConfigSecret.github_token=<span>"<span>${GITHUB_PAT}</span>"</span> \
    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set
</code></pre>
<p>To use this configuration in a workflow, set the value of the <code>runs-on</code> key in your workflow to <code>arc-runner-set</code>, similar to the following example.</p>
<pre><code><span>jobs:</span>
  <span>job_name:</span>
    <span>runs-on:</span> <span>arc-runner-set</span>
</code></pre>
<h2><a href="#using-runner-scale-set-names">Using runner scale set names</a></h2>
<p>Runner scale set names are unique within the runner group they belong to. To deploy multiple runner scale sets with the same name, they must belong to different runner groups. For more information about specifying runner scale set names, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/deploying-runner-scale-sets-with-actions-runner-controller">Deploying runner scale sets with Actions Runner Controller</a>.</p>
<p>You cannot use additional labels to target runners created by ARC. You can only use the installation name of the runner scale set that you specified during the installation or by defining the value of the <code>runnerScaleSetName</code> field in your <a href="https://github.com/actions/actions-runner-controller/blob/master/charts/gha-runner-scale-set/values.yaml"><code>values.yaml</code></a> file. These are used as the 'single label' to use as your <code>runs-on</code> target. For more information, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/deploying-runner-scale-sets-with-actions-runner-controller#scaling-runners">Deploying runner scale sets with Actions Runner Controller</a>.</p>
<h2><a href="#legal-notice">Legal notice</a></h2>
<p>Portions have been adapted from <a href="https://github.com/actions/actions-runner-controller/">https://github.com/actions/actions-runner-controller/</a> under the Apache-2.0 license:</p>
<pre><code>Copyright 2019 Moto Ishizawa

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
</div></div></div>
</div>
</div></main>
</div></body></html>