<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Apps" href="/en/apps">Apps</a><span>/</span>
</li>
<li>
<a title="GitHub Marketplace" href="/en/apps/github-marketplace">GitHub Marketplace</a><span>/</span>
</li>
<li>
<a title="Marketplace API usage" href="/en/apps/github-marketplace/using-the-github-marketplace-api-in-your-app">Marketplace API usage</a><span>/</span>
</li>
<li><a title="Plan cancellations" href="/en/apps/github-marketplace/using-the-github-marketplace-api-in-your-app/handling-plan-cancellations">Plan cancellations</a></li>
</ul></nav></div>
<div>
<div><div><h1>Handling plan cancellations</h1></div></div>
<div><div><p>Cancelling a GitHub Marketplace app triggers the <a href="/en/marketplace/integrating-with-the-github-marketplace-api/github-marketplace-webhook-events"><code>marketplace_purchase</code> event</a> webhook with the <code>cancelled</code> action, which kicks off the cancellation flow.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#step-1-cancellation-event"><div><span>Step 1. Cancellation event</span></div></a></li>
<li><a href="#step-2-deactivating-customer-accounts"><div><span>Step 2. Deactivating customer accounts</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<div>
<p>
This article applies to publishing apps in GitHub Marketplace only. For more information about publishing GitHub Actions in GitHub Marketplace, see <a href="/en/actions/creating-actions/publishing-actions-in-github-marketplace">Publishing actions in GitHub Marketplace</a>.</p>
</div>
<p>For more information about cancelling as it relates to billing, see <a href="/en/apps/github-marketplace/selling-your-app-on-github-marketplace/billing-customers">Billing customers</a>.</p>
<h2><a href="#step-1-cancellation-event">Step 1. Cancellation event</a></h2>
<p>If a customer chooses to cancel a GitHub Marketplace order, GitHub sends a <a href="/en/apps/github-marketplace/using-the-github-marketplace-api-in-your-app/webhook-events-for-the-github-marketplace-api"><code>marketplace_purchase</code></a> webhook with the action <code>cancelled</code> to your app when the cancellation takes effect. If the customer cancels during a free trial, your app will receive the event immediately. When a customer cancels a paid plan, the cancellation will occur at the end of the customer's billing cycle.</p>
<h2><a href="#step-2-deactivating-customer-accounts">Step 2. Deactivating customer accounts</a></h2>
<p>When a customer cancels a free or paid plan, your app must perform these steps to complete cancellation:</p>
<ol>
<li>Deactivate the account of the customer who canceled their plan.</li>
<li>Revoke the OAuth token your app received for the customer.</li>
<li>If your app is an OAuth app, remove all webhooks your app created for repositories.</li>
<li>Remove all customer data within 30 days of receiving the <code>cancelled</code> event.</li>
</ol>
<div>
<p>
We recommend using the <a href="/en/apps/github-marketplace/using-the-github-marketplace-api-in-your-app/webhook-events-for-the-github-marketplace-api"><code>marketplace_purchase</code></a> webhook's <code>effective_date</code> to determine when a plan change will occur and periodically synchronizing the <a href="/en/rest/apps/marketplace#list-accounts-for-a-plan">List accounts for a plan</a>. For more information on webhooks, see <a href="/en/apps/github-marketplace/using-the-github-marketplace-api-in-your-app/webhook-events-for-the-github-marketplace-api">Webhook events for the GitHub Marketplace API</a>.</p>
</div>
</div></div></div>
</div>
</div></main>
</div></body></html>