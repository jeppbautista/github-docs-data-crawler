<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Use cases and examples" href="/en/actions/use-cases-and-examples">Use cases and examples</a><span>/</span>
</li>
<li>
<a title="Build and test" href="/en/actions/use-cases-and-examples/building-and-testing">Build and test</a><span>/</span>
</li>
<li><a title="Build &amp; test Python" href="/en/actions/use-cases-and-examples/building-and-testing/building-and-testing-python">Build &amp; test Python</a></li>
</ul></nav></div>
<div>
<div><div><h1>Building and testing Python</h1></div></div>
<div><div><p>You can create a continuous integration (CI) workflow to build and test your Python project.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#introduction"><div><span>Introduction</span></div></a></li>
<li><a href="#prerequisites"><div><span>Prerequisites</span></div></a></li>
<li><a href="#using-a-python-workflow-template"><div><span>Using a Python workflow template</span></div></a></li>
<li><a href="#specifying-a-python-version"><div><span>Specifying a Python version</span></div></a></li>
<li><a href="#installing-dependencies"><div><span>Installing dependencies</span></div></a></li>
<li><a href="#testing-your-code"><div><span>Testing your code</span></div></a></li>
<li><a href="#packaging-workflow-data-as-artifacts"><div><span>Packaging workflow data as artifacts</span></div></a></li>
<li><a href="#publishing-to-pypi"><div><span>Publishing to PyPI</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#introduction">Introduction</a></h2>
<p>This guide shows you how to build, test, and publish a Python package.</p>
<p>GitHub-hosted runners have a tools cache with pre-installed software, which includes Python and PyPy. You don't have to install anything! For a full list of up-to-date software and the pre-installed versions of Python and PyPy, see <a href="/en/actions/using-github-hosted-runners/about-github-hosted-runners#supported-software">Using GitHub-hosted runners</a>.</p>
<h2><a href="#prerequisites">Prerequisites</a></h2>
<p>You should be familiar with YAML and the syntax for GitHub Actions. For more information, see <a href="/en/actions/learn-github-actions">Writing workflows</a>.</p>
<p>We recommend that you have a basic understanding of Python, and pip. For more information, see:</p>
<ul>
<li><a href="https://www.python.org/about/gettingstarted/">Getting started with Python</a></li>
<li><a href="https://pypi.org/project/pip/">Pip package manager</a></li>
</ul>
<h2><a href="#using-a-python-workflow-template">Using a Python workflow template</a></h2>
<p>To get started quickly, add a workflow template to the <code>.github/workflows</code> directory of your repository.</p>
<p>GitHub provides a workflow template for Python that should work if your repository already contains at least one <code>.py</code> file. The subsequent sections of this guide give examples of how you can customize this workflow template.</p>
<ol>
<li>
<p>On GitHub, navigate to the main page of the repository.</p>
</li>
<li>
<p>Under your repository name, click </p>
<div><picture><source><img src="/assets/cb-12958/images/help/repository/actions-tab-global-nav-update.png" alt='Screenshot of the tabs for the "github/docs" repository. The "Actions" tab is highlighted with an orange outline.' width="1242" height="186"></source></picture></div>
</li>
<li>
<p>If you already have a workflow in your repository, click <strong>New workflow</strong>.</p>
</li>
<li>
<p>The "Choose a workflow" page shows a selection of recommended workflow templates. Search for "Python application".</p>
</li>
<li>
<p>On the "Python application" workflow, click <strong>Configure</strong>.</p>
</li>
<li>
<p>Edit the workflow as required. For example, change the Python version.</p>
</li>
<li>
<p>Click <strong>Commit changes</strong>.</p>
<p>The <code>python-app.yml</code> workflow file is added to the <code>.github/workflows</code> directory of your repository.</p>
</li>
</ol>
<h2><a href="#specifying-a-python-version">Specifying a Python version</a></h2>
<p>To use a pre-installed version of Python or PyPy on a GitHub-hosted runner, use the <code>setup-python</code> action. This action finds a specific version of Python or PyPy from the tools cache on each runner and adds the necessary binaries to <code>PATH</code>, which persists for the rest of the job. If a specific version of Python is not pre-installed in the tools cache, the <code>setup-python</code> action will download and set up the appropriate version from the <a href="https://github.com/actions/python-versions"><code>python-versions</code></a> repository.</p>
<p>Using the <code>setup-python</code> action is the recommended way of using Python with GitHub Actions because it ensures consistent behavior across different runners and different versions of Python. If you are using a self-hosted runner, you must install Python and add it to <code>PATH</code>. For more information, see the <a href="https://github.com/marketplace/actions/setup-python"><code>setup-python</code> action</a>.</p>
<p>The table below describes the locations for the tools cache in each GitHub-hosted runner.</p>
<div>





























<table>
<thead><tr>
<th></th>
<th>Ubuntu</th>
<th>Mac</th>
<th>Windows</th>
</tr></thead>
<tbody>
<tr>
<th><strong>Tool Cache Directory</strong></th>
<td><code>/<wbr>opt/<wbr>hostedtoolcache/<wbr>*</wbr></wbr></wbr></code></td>
<td><code>/<wbr>Users/<wbr>runner/<wbr>hostedtoolcache/<wbr>*</wbr></wbr></wbr></wbr></code></td>
<td><code>C:\<wbr>hostedtoolcache\<wbr>windows\<wbr>*</wbr></wbr></wbr></code></td>
</tr>
<tr>
<th><strong>Python Tool Cache</strong></th>
<td><code>/<wbr>opt/<wbr>hostedtoolcache/<wbr>Python/<wbr>*</wbr></wbr></wbr></wbr></code></td>
<td><code>/<wbr>Users/<wbr>runner/<wbr>hostedtoolcache/<wbr>Python/<wbr>*</wbr></wbr></wbr></wbr></wbr></code></td>
<td><code>C:\<wbr>hostedtoolcache\<wbr>windows\<wbr>Python\<wbr>*</wbr></wbr></wbr></wbr></code></td>
</tr>
<tr>
<th><strong>PyPy Tool Cache</strong></th>
<td><code>/<wbr>opt/<wbr>hostedtoolcache/<wbr>Py<wbr>Py/<wbr>*</wbr></wbr></wbr></wbr></wbr></code></td>
<td><code>/<wbr>Users/<wbr>runner/<wbr>hostedtoolcache/<wbr>Py<wbr>Py/<wbr>*</wbr></wbr></wbr></wbr></wbr></wbr></code></td>
<td><code>C:\<wbr>hostedtoolcache\<wbr>windows\<wbr>Py<wbr>Py\<wbr>*</wbr></wbr></wbr></wbr></wbr></code></td>
</tr>
</tbody>
</table>
</div>
<p>If you are using a self-hosted runner, you can configure the runner to use the <code>setup-python</code> action to manage your dependencies. For more information, see <a href="https://github.com/actions/setup-python#using-setup-python-with-a-self-hosted-runner">using setup-python with a self-hosted runner</a> in the <code>setup-python</code> README.</p>
<p>GitHub supports semantic versioning syntax. For more information, see <a href="https://docs.npmjs.com/about-semantic-versioning#using-semantic-versioning-to-specify-update-types-your-package-can-accept">Using semantic versioning</a> and the <a href="https://semver.org/">Semantic versioning specification</a>.</p>
<h3><a href="#using-multiple-python-versions">Using multiple Python versions</a></h3>
<p>The following example uses a matrix for the job to set up multiple Python versions. For more information, see <a href="/en/actions/using-jobs/using-a-matrix-for-your-jobs">Running variations of jobs in a workflow</a>.</p>
<div>
<header><span>YAML</span><pre>name: Python package

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["pypy3.10", "3.9", "3.10", "3.11", "3.12", "3.13"]

    steps:
      - uses: actions/checkout@v4
      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
      # You can test your matrix by printing the current Python version
      - name: Display Python version
        run: python -c "import sys; print(sys.version)"
</pre></header><pre><code><span>name:</span> <span>Python</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>strategy:</span>
      <span>matrix:</span>
        <span>python-version:</span> [<span>"pypy3.10"</span>, <span>"3.9"</span>, <span>"3.10"</span>, <span>"3.11"</span>, <span>"3.12"</span>, <span>"3.13"</span>]

    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>name:</span> <span>Set</span> <span>up</span> <span>Python</span> <span>${{</span> <span>matrix.python-version</span> <span>}}</span>
        <span>uses:</span> <span>actions/setup-python@v5</span>
        <span>with:</span>
          <span>python-version:</span> <span>${{</span> <span>matrix.python-version</span> <span>}}</span>
      <span># You can test your matrix by printing the current Python version</span>
      <span>-</span> <span>name:</span> <span>Display</span> <span>Python</span> <span>version</span>
        <span>run:</span> <span>python</span> <span>-c</span> <span>"import sys; print(sys.version)"</span>
</code></pre>
</div>
<h3><a href="#using-a-specific-python-version">Using a specific Python version</a></h3>
<p>You can configure a specific version of Python. For example, 3.12. Alternatively, you can use semantic version syntax to get the latest minor release. This example uses the latest minor release of Python 3.</p>
<div>
<header><span>YAML</span><pre>name: Python package

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        # This is the version of the action for setting up Python, not the Python version.
        uses: actions/setup-python@v5
        with:
          # Semantic version range syntax or exact version of a Python version
          python-version: '3.x'
          # Optional - x64 or x86 architecture, defaults to x64
          architecture: 'x64'
      # You can test your matrix by printing the current Python version
      - name: Display Python version
        run: python -c "import sys; print(sys.version)"
</pre></header><pre><code><span>name:</span> <span>Python</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>ubuntu-latest</span>

    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>name:</span> <span>Set</span> <span>up</span> <span>Python</span>
        <span># This is the version of the action for setting up Python, not the Python version.</span>
        <span>uses:</span> <span>actions/setup-python@v5</span>
        <span>with:</span>
          <span># Semantic version range syntax or exact version of a Python version</span>
          <span>python-version:</span> <span>'3.x'</span>
          <span># Optional - x64 or x86 architecture, defaults to x64</span>
          <span>architecture:</span> <span>'x64'</span>
      <span># You can test your matrix by printing the current Python version</span>
      <span>-</span> <span>name:</span> <span>Display</span> <span>Python</span> <span>version</span>
        <span>run:</span> <span>python</span> <span>-c</span> <span>"import sys; print(sys.version)"</span>
</code></pre>
</div>
<h3><a href="#excluding-a-version">Excluding a version</a></h3>
<p>If you specify a version of Python that is not available, <code>setup-python</code> fails with an error such as: <code>##[error]Version 3.7 with arch x64 not found</code>. The error message includes the available versions.</p>
<p>You can also use the <code>exclude</code> keyword in your workflow if there is a configuration of Python that you do not wish to run. For more information, see <a href="/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstrategy">Workflow syntax for GitHub Actions</a>.</p>
<div>
<header><span>YAML</span><pre>name: Python package

on: [push]

jobs:
  build:

    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        python-version: ["3.9", "3.11", "3.13", "pypy3.10"]
        exclude:
          - os: macos-latest
            python-version: "3.11"
          - os: windows-latest
            python-version: "3.11"
</pre></header><pre><code><span>name:</span> <span>Python</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>${{</span> <span>matrix.os</span> <span>}}</span>
    <span>strategy:</span>
      <span>matrix:</span>
        <span>os:</span> [<span>ubuntu-latest</span>, <span>macos-latest</span>, <span>windows-latest</span>]
        <span>python-version:</span> [<span>"3.9"</span>, <span>"3.11"</span>, <span>"3.13"</span>, <span>"pypy3.10"</span>]
        <span>exclude:</span>
          <span>-</span> <span>os:</span> <span>macos-latest</span>
            <span>python-version:</span> <span>"3.11"</span>
          <span>-</span> <span>os:</span> <span>windows-latest</span>
            <span>python-version:</span> <span>"3.11"</span>
</code></pre>
</div>
<h3><a href="#using-the-default-python-version">Using the default Python version</a></h3>
<p>We recommend using <code>setup-python</code> to configure the version of Python used in your workflows because it helps make your dependencies explicit. If you don't use <code>setup-python</code>, the default version of Python set in <code>PATH</code> is used in any shell when you call <code>python</code>. The default version of Python varies between GitHub-hosted runners, which may cause unexpected changes or use an older version than expected.</p>





















<table>
<thead><tr>
<th>GitHub-hosted runner</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>Ubuntu</td>
<td>Ubuntu runners have multiple versions of system Python installed under <code>/usr/bin/python</code> and <code>/usr/bin/python3</code>. The Python versions that come packaged with Ubuntu are in addition to the versions that GitHub installs in the tools cache.</td>
</tr>
<tr>
<td>Windows</td>
<td>Excluding the versions of Python that are in the tools cache, Windows does not ship with an equivalent version of system Python. To maintain consistent behavior with other runners and to allow Python to be used out-of-the-box without the <code>setup-python</code> action, GitHub adds a few versions from the tools cache to <code>PATH</code>.</td>
</tr>
<tr>
<td>macOS</td>
<td>The macOS runners have more than one version of system Python installed, in addition to the versions that are part of the tools cache. The system Python versions are located in the <code>/<wbr>usr/<wbr>local/<wbr>Cellar/<wbr>python/<wbr>*</wbr></wbr></wbr></wbr></wbr></code> directory.</td>
</tr>
</tbody>
</table>
<h2><a href="#installing-dependencies">Installing dependencies</a></h2>
<p>GitHub-hosted runners have the pip package manager installed. You can use pip to install dependencies from the PyPI package registry before building and testing your code. For example, the YAML below installs or upgrades the <code>pip</code> package installer and the <code>setuptools</code> and <code>wheel</code> packages.</p>
<p>You can also cache dependencies to speed up your workflow. For more information, see <a href="/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows">Caching dependencies to speed up workflows</a>.</p>
<div>
<header><span>YAML</span><pre>steps:
- uses: actions/checkout@v4
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.x'
- name: Install dependencies
  run: python -m pip install --upgrade pip setuptools wheel
</pre></header><pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Set</span> <span>up</span> <span>Python</span>
  <span>uses:</span> <span>actions/setup-python@v5</span>
  <span>with:</span>
    <span>python-version:</span> <span>'3.x'</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
  <span>run:</span> <span>python</span> <span>-m</span> <span>pip</span> <span>install</span> <span>--upgrade</span> <span>pip</span> <span>setuptools</span> <span>wheel</span>
</code></pre>
</div>
<h3><a href="#requirements-file">Requirements file</a></h3>
<p>After you update <code>pip</code>, a typical next step is to install dependencies from <code>requirements.txt</code>. For more information, see <a href="https://pip.pypa.io/en/stable/cli/pip_install/#example-requirements-file">pip</a>.</p>
<div>
<header><span>YAML</span><pre>steps:
- uses: actions/checkout@v4
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.x'
- name: Install dependencies
  run: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt
</pre></header><pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Set</span> <span>up</span> <span>Python</span>
  <span>uses:</span> <span>actions/setup-python@v5</span>
  <span>with:</span>
    <span>python-version:</span> <span>'3.x'</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
  <span>run:</span> <span>|
    python -m pip install --upgrade pip
    pip install -r requirements.txt
</span></code></pre>
</div>
<h3><a href="#caching-dependencies">Caching Dependencies</a></h3>
<p>You can cache and restore the dependencies using the <a href="https://github.com/actions/setup-python"><code>setup-python</code> action</a>.</p>
<p>The following example caches dependencies for pip.</p>
<div>
<header><span>YAML</span><pre>steps:
- uses: actions/checkout@v4
- uses: actions/setup-python@v5
  with:
    python-version: '3.12'
    cache: 'pip'
- run: pip install -r requirements.txt
- run: pip test
</pre></header><pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>uses:</span> <span>actions/setup-python@v5</span>
  <span>with:</span>
    <span>python-version:</span> <span>'3.12'</span>
    <span>cache:</span> <span>'pip'</span>
<span>-</span> <span>run:</span> <span>pip</span> <span>install</span> <span>-r</span> <span>requirements.txt</span>
<span>-</span> <span>run:</span> <span>pip</span> <span>test</span>
</code></pre>
</div>
<p>By default, the <code>setup-python</code> action searches for the dependency file (<code>requirements.txt</code> for pip, <code>Pipfile.lock</code> for pipenv or <code>poetry.lock</code> for poetry) in the whole repository. For more information, see <a href="https://github.com/actions/setup-python#caching-packages-dependencies">Caching packages dependencies</a> in the <code>setup-python</code> README.</p>
<p>If you have a custom requirement or need finer controls for caching, you can use the <a href="https://github.com/marketplace/actions/cache"><code>cache</code> action</a>. Pip caches dependencies in different locations, depending on the operating system of the runner. The path you'll need to cache may differ from the Ubuntu example above, depending on the operating system you use. For more information, see <a href="https://github.com/actions/cache/blob/main/examples.md#python---pip">Python caching examples</a> in the <code>cache</code> action repository.</p>
<h2><a href="#testing-your-code">Testing your code</a></h2>
<p>You can use the same commands that you use locally to build and test your code.</p>
<h3><a href="#testing-with-pytest-and-pytest-cov">Testing with pytest and pytest-cov</a></h3>
<p>This example installs or upgrades <code>pytest</code> and <code>pytest-cov</code>. Tests are then run and output in JUnit format while code coverage results are output in Cobertura. For more information, see <a href="https://junit.org/junit5/">JUnit</a> and <a href="https://cobertura.github.io/cobertura/">Cobertura</a>.</p>
<div>
<header><span>YAML</span><pre>steps:
- uses: actions/checkout@v4
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.x'
- name: Install dependencies
  run: |
    python -m pip install --upgrade pip
    pip install -r requirements.txt
- name: Test with pytest
  run: |
    pip install pytest pytest-cov
    pytest tests.py --doctest-modules --junitxml=junit/test-results.xml --cov=com --cov-report=xml --cov-report=html
</pre></header><pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Set</span> <span>up</span> <span>Python</span>
  <span>uses:</span> <span>actions/setup-python@v5</span>
  <span>with:</span>
    <span>python-version:</span> <span>'3.x'</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
  <span>run:</span> <span>|
    python -m pip install --upgrade pip
    pip install -r requirements.txt
</span><span>-</span> <span>name:</span> <span>Test</span> <span>with</span> <span>pytest</span>
  <span>run:</span> <span>|
    pip install pytest pytest-cov
    pytest tests.py --doctest-modules --junitxml=junit/test-results.xml --cov=com --cov-report=xml --cov-report=html
</span></code></pre>
</div>
<h3><a href="#using-ruff-to-lint-andor-format-code">Using Ruff to lint and/or format code</a></h3>
<p>The following example installs or upgrades <code>ruff</code> and uses it to lint all files. For more information, see <a href="https://docs.astral.sh/ruff">Ruff</a>.</p>
<div>
<header><span>YAML</span><pre>steps:
- uses: actions/checkout@v4
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.x'
- name: Install the code linting and formatting tool Ruff
  run: pipx install ruff
- name: Lint code with Ruff
  run: ruff check --output-format=github --target-version=py39
- name: Check code formatting with Ruff
  run: ruff format --diff --target-version=py39
  continue-on-error: true
</pre></header><pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Set</span> <span>up</span> <span>Python</span>
  <span>uses:</span> <span>actions/setup-python@v5</span>
  <span>with:</span>
    <span>python-version:</span> <span>'3.x'</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>the</span> <span>code</span> <span>linting</span> <span>and</span> <span>formatting</span> <span>tool</span> <span>Ruff</span>
  <span>run:</span> <span>pipx</span> <span>install</span> <span>ruff</span>
<span>-</span> <span>name:</span> <span>Lint</span> <span>code</span> <span>with</span> <span>Ruff</span>
  <span>run:</span> <span>ruff</span> <span>check</span> <span>--output-format=github</span> <span>--target-version=py39</span>
<span>-</span> <span>name:</span> <span>Check</span> <span>code</span> <span>formatting</span> <span>with</span> <span>Ruff</span>
  <span>run:</span> <span>ruff</span> <span>format</span> <span>--diff</span> <span>--target-version=py39</span>
  <span>continue-on-error:</span> <span>true</span>
</code></pre>
</div>
<p>The formatting step has <code>continue-on-error: true</code> set. This will keep the workflow from failing if the formatting step doesn't succeed. Once you've addressed all of the formatting errors, you can remove this option so the workflow will catch new issues.</p>
<h3><a href="#running-tests-with-tox">Running tests with tox</a></h3>
<p>With GitHub Actions, you can run tests with tox and spread the work across multiple jobs. You'll need to invoke tox using the <code>-e py</code> option to choose the version of Python in your <code>PATH</code>, rather than specifying a specific version. For more information, see <a href="https://tox.readthedocs.io/en/latest/">tox</a>.</p>
<div>
<header><span>YAML</span><pre>name: Python package

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        python: ["3.9", "3.11", "3.13"]

    steps:
      - uses: actions/checkout@v4
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python }}
      - name: Install tox and any other packages
        run: pip install tox
      - name: Run tox
        # Run tox using the version of Python in `PATH`
        run: tox -e py
</pre></header><pre><code><span>name:</span> <span>Python</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>strategy:</span>
      <span>matrix:</span>
        <span>python:</span> [<span>"3.9"</span>, <span>"3.11"</span>, <span>"3.13"</span>]

    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>name:</span> <span>Setup</span> <span>Python</span>
        <span>uses:</span> <span>actions/setup-python@v5</span>
        <span>with:</span>
          <span>python-version:</span> <span>${{</span> <span>matrix.python</span> <span>}}</span>
      <span>-</span> <span>name:</span> <span>Install</span> <span>tox</span> <span>and</span> <span>any</span> <span>other</span> <span>packages</span>
        <span>run:</span> <span>pip</span> <span>install</span> <span>tox</span>
      <span>-</span> <span>name:</span> <span>Run</span> <span>tox</span>
        <span># Run tox using the version of Python in `PATH`</span>
        <span>run:</span> <span>tox</span> <span>-e</span> <span>py</span>
</code></pre>
</div>
<h2><a href="#packaging-workflow-data-as-artifacts">Packaging workflow data as artifacts</a></h2>
<p>You can upload artifacts to view after a workflow completes. For example, you may need to save log files, core dumps, test results, or screenshots. For more information, see <a href="/en/actions/using-workflows/storing-workflow-data-as-artifacts">Storing and sharing data from a workflow</a>.</p>
<p>The following example demonstrates how you can use the <code>upload-artifact</code> action to archive test results from running <code>pytest</code>. For more information, see the <a href="https://github.com/actions/upload-artifact"><code>upload-artifact</code> action</a>.</p>
<div>
<header><span>YAML</span><pre>name: Python package

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.9", "3.10", "3.11", "3.12", "3.13"]

    steps:
      - uses: actions/checkout@v4
      - name: Setup Python # Set Python version
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
      # Install pip and pytest
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pytest
      - name: Test with pytest
        run: pytest tests.py --doctest-modules --junitxml=junit/test-results-${{ matrix.python-version }}.xml
      - name: Upload pytest test results
        uses: actions/upload-artifact@v4
        with:
          name: pytest-results-${{ matrix.python-version }}
          path: junit/test-results-${{ matrix.python-version }}.xml
        # Use always() to always run this step to publish test results when there are test failures
        if: ${{ always() }}
</pre></header><pre><code><span>name:</span> <span>Python</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>strategy:</span>
      <span>matrix:</span>
        <span>python-version:</span> [<span>"3.9"</span>, <span>"3.10"</span>, <span>"3.11"</span>, <span>"3.12"</span>, <span>"3.13"</span>]

    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>name:</span> <span>Setup</span> <span>Python</span> <span># Set Python version</span>
        <span>uses:</span> <span>actions/setup-python@v5</span>
        <span>with:</span>
          <span>python-version:</span> <span>${{</span> <span>matrix.python-version</span> <span>}}</span>
      <span># Install pip and pytest</span>
      <span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
        <span>run:</span> <span>|
          python -m pip install --upgrade pip
          pip install pytest
</span>      <span>-</span> <span>name:</span> <span>Test</span> <span>with</span> <span>pytest</span>
        <span>run:</span> <span>pytest</span> <span>tests.py</span> <span>--doctest-modules</span> <span>--junitxml=junit/test-results-${{</span> <span>matrix.python-version</span> <span>}}.xml</span>
      <span>-</span> <span>name:</span> <span>Upload</span> <span>pytest</span> <span>test</span> <span>results</span>
        <span>uses:</span> <span>actions/upload-artifact@v4</span>
        <span>with:</span>
          <span>name:</span> <span>pytest-results-${{</span> <span>matrix.python-version</span> <span>}}</span>
          <span>path:</span> <span>junit/test-results-${{</span> <span>matrix.python-version</span> <span>}}.xml</span>
        <span># Use always() to always run this step to publish test results when there are test failures</span>
        <span>if:</span> <span>${{</span> <span>always()</span> <span>}}</span>
</code></pre>
</div>
<h2><a href="#publishing-to-pypi">Publishing to PyPI</a></h2>
<p>You can configure your workflow to publish your Python package to PyPI once your CI tests pass. This section demonstrates how you can use GitHub Actions to upload your package to PyPI each time you publish a release. For more information, see <a href="/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository">Managing releases in a repository</a>.</p>
<p>The example workflow below uses <a href="https://docs.pypi.org/trusted-publishers/">Trusted Publishing</a> to authenticate with PyPI, eliminating the need for a manually configured API token.</p>
<div>
<header><span>YAML</span><pre># This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

# GitHub recommends pinning actions to a commit SHA.
# To get a newer version, you will need to update the SHA.
# You can also reference a tag or branch, but the action may change without warning.

name: Upload Python Package

on:
  release:
    types: [published]

permissions:
  contents: read

jobs:
  release-build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: Build release distributions
        run: |
          # NOTE: put your own distribution build steps here.
          python -m pip install build
          python -m build

      - name: Upload distributions
        uses: actions/upload-artifact@v4
        with:
          name: release-dists
          path: dist/

  pypi-publish:
    runs-on: ubuntu-latest

    needs:
      - release-build

    permissions:
      # IMPORTANT: this permission is mandatory for trusted publishing
      id-token: write

    # Dedicated environments with protections for publishing are strongly recommended.
    environment:
      name: pypi
      # OPTIONAL: uncomment and update to include your PyPI project URL in the deployment status:
      # url: https://pypi.org/p/YOURPROJECT

    steps:
      - name: Retrieve release distributions
        uses: actions/download-artifact@v4
        with:
          name: release-dists
          path: dist/

      - name: Publish release distributions to PyPI
        uses: pypa/gh-action-pypi-publish@6f7e8d9c0b1a2c3d4e5f6a7b8c9d0e1f2a3b4c5d
</pre></header><pre><code><span># This workflow uses actions that are not certified by GitHub.</span>
<span># They are provided by a third-party and are governed by</span>
<span># separate terms of service, privacy policy, and support</span>
<span># documentation.</span>

<span># GitHub recommends pinning actions to a commit SHA.</span>
<span># To get a newer version, you will need to update the SHA.</span>
<span># You can also reference a tag or branch, but the action may change without warning.</span>

<span>name:</span> <span>Upload</span> <span>Python</span> <span>Package</span>

<span>on:</span>
  <span>release:</span>
    <span>types:</span> [<span>published</span>]

<span>permissions:</span>
  <span>contents:</span> <span>read</span>

<span>jobs:</span>
  <span>release-build:</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>

    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>

      <span>-</span> <span>uses:</span> <span>actions/setup-python@v5</span>
        <span>with:</span>
          <span>python-version:</span> <span>"3.x"</span>

      <span>-</span> <span>name:</span> <span>Build</span> <span>release</span> <span>distributions</span>
        <span>run:</span> <span>|
          # NOTE: put your own distribution build steps here.
          python -m pip install build
          python -m build
</span>
      <span>-</span> <span>name:</span> <span>Upload</span> <span>distributions</span>
        <span>uses:</span> <span>actions/upload-artifact@v4</span>
        <span>with:</span>
          <span>name:</span> <span>release-dists</span>
          <span>path:</span> <span>dist/</span>

  <span>pypi-publish:</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>

    <span>needs:</span>
      <span>-</span> <span>release-build</span>

    <span>permissions:</span>
      <span># IMPORTANT: this permission is mandatory for trusted publishing</span>
      <span>id-token:</span> <span>write</span>

    <span># Dedicated environments with protections for publishing are strongly recommended.</span>
    <span>environment:</span>
      <span>name:</span> <span>pypi</span>
      <span># OPTIONAL: uncomment and update to include your PyPI project URL in the deployment status:</span>
      <span># url: https://pypi.org/p/YOURPROJECT</span>

    <span>steps:</span>
      <span>-</span> <span>name:</span> <span>Retrieve</span> <span>release</span> <span>distributions</span>
        <span>uses:</span> <span>actions/download-artifact@v4</span>
        <span>with:</span>
          <span>name:</span> <span>release-dists</span>
          <span>path:</span> <span>dist/</span>

      <span>-</span> <span>name:</span> <span>Publish</span> <span>release</span> <span>distributions</span> <span>to</span> <span>PyPI</span>
        <span>uses:</span> <span>pypa/gh-action-pypi-publish@6f7e8d9c0b1a2c3d4e5f6a7b8c9d0e1f2a3b4c5d</span>
</code></pre>
</div>
<p>For more information about this workflow, including the PyPI settings
needed, see <a href="/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-pypi">Configuring OpenID Connect in PyPI</a>.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>