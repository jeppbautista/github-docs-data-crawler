<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Get started" href="/en/get-started">Get started</a><span>/</span>
</li>
<li>
<a title="Using Git" href="/en/get-started/using-git">Using Git</a><span>/</span>
</li>
<li><a title="Git rebase" href="/en/get-started/using-git/using-git-rebase-on-the-command-line">Git rebase</a></li>
</ul></nav></div>
<div>
<div><div><h1>Using Git rebase on the command line</h1></div></div>
<div><div><p>Here's a short tutorial on using <code>git rebase</code> on the command line.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#using-git-rebase"><div><span>Using Git rebase</span></div></a></li>
<li><a href="#pushing-rebased-code-to-github"><div><span>Pushing rebased code to GitHub</span></div></a></li>
<li><a href="#further-reading"><div><span>Further reading</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#using-git-rebase">Using Git rebase</a></h2>
<p>In this example, we will cover all of the <code>git rebase</code> commands available, except for <code>exec</code>.</p>
<p>We'll start our rebase by entering <code>git rebase --interactive HEAD~7</code> on the terminal. Our favorite text editor will display the following lines:</p>
<pre><code>pick 1fc6c95 Patch A
pick 6b2481b Patch B
pick dd1475d something I want to split
pick c619268 A fix for Patch B
pick fa39187 something to add to patch A
pick 4ca2acc i cant' typ goods
pick 7b36971 something to move before patch B
</code></pre>
<p>In this example, we're going to:</p>
<ul>
<li>Squash the fifth commit (<code>fa39187</code>) into the <code>"Patch A"</code> commit (<code>1fc6c95</code>), using <code>squash</code>.</li>
<li>Move the last commit (<code>7b36971</code>) up before the <code>"Patch B"</code> commit (<code>6b2481b</code>), and keep it as <code>pick</code>.</li>
<li>Merge the <code>"A fix for Patch B"</code> commit (<code>c619268</code>) into the <code>"Patch B"</code> commit (<code>6b2481b</code>), and disregard the commit message using <code>fixup</code>.</li>
<li>Split the third commit (<code>dd1475d</code>) into two smaller commits, using <code>edit</code>.</li>
<li>Fix the commit message of the misspelled commit (<code>4ca2acc</code>), using <code>reword</code>.</li>
</ul>
<p>Phew! This sounds like a lot of work, but by taking it one step at a time, we can easily make those changes.</p>
<p>To start, we'll need to modify the commands in the file to look like this:</p>
<pre><code>pick 1fc6c95 Patch A
squash fa39187 something to add to patch A
pick 7b36971 something to move before patch B
pick 6b2481b Patch B
fixup c619268 A fix for Patch B
edit dd1475d something I want to split
reword 4ca2acc i cant' typ goods
</code></pre>
<p>We've changed each line's command from <code>pick</code> to the command we're interested in.</p>
<p>Now, save and close the editor; this will start the interactive rebase.</p>
<p>Git skips the first rebase command, <code>pick 1fc6c95</code>, since it doesn't need to do anything. It goes to the next command, <code>squash fa39187</code>. Since this operation requires your input, Git opens your text editor once again. The file it opens up looks something like this:</p>
<pre><code># This is a combination of two commits.
# The first commit's message is:

Patch A

# This is the 2nd commit message:

something to add to patch A

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# Not currently on any branch.
# Changes to be committed:
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
# modified:   a
#
</code></pre>
<p>This file is Git's way of saying, "Hey, here's what I'm about to do with this <code>squash</code>." It lists the first commit's message (<code>"Patch A"</code>), and the second commit's message (<code>"something to add to patch A"</code>). If you're happy with these commit messages, you can save the file, and close the editor. Otherwise, you have the option of changing the commit message by simply changing the text.</p>
<p>When the editor is closed, the rebase continues:</p>
<pre><code>pick 1fc6c95 Patch A
squash fa39187 something to add to patch A
pick 7b36971 something to move before patch B
pick 6b2481b Patch B
fixup c619268 A fix for Patch B
edit dd1475d something I want to split
reword 4ca2acc i cant' typ goods
</code></pre>
<p>Git processes the two <code>pick</code> commands (for <code>pick 7b36971</code> and <code>pick 6b2481b</code>). It <em>also</em> processes the <code>fixup</code> command (<code>fixup c619268</code>), since it doesn't require any interaction. <code>fixup</code> merges the changes from <code>c619268</code> into the commit before it, <code>6b2481b</code>. Both changes will have the same commit message: <code>"Patch B"</code>.</p>
<p>Git gets to the <code>edit dd1475d</code> operation, stops, and prints the following message to the terminal:</p>
<pre><code>You can amend the commit now, with

        git commit --amend

Once you are satisfied with your changes, run

        git rebase --continue
</code></pre>
<p>At this point, you can edit any of the files in your project to make any additional changes. For each change you make, you'll need to perform a new commit, and you can do that by entering the <code>git commit --amend</code> command. When you're finished making all your changes, you can run <code>git rebase --continue</code>.</p>
<p>Git then gets to the <code>reword 4ca2acc</code> command. It opens up your text editor one more time, and presents the following information:</p>
<pre><code>i cant' typ goods

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# Not currently on any branch.
# Changes to be committed:
#   (use "git reset HEAD^1 &lt;file&gt;..." to unstage)
#
# modified:   a
#
</code></pre>
<p>As before, Git is showing the commit message for you to edit. You can change the text (<code>"i cant' typ goods"</code>), save the file, and close the editor. Git will finish the rebase and return you to the terminal.</p>
<h2><a href="#pushing-rebased-code-to-github">Pushing rebased code to GitHub</a></h2>
<p>Since you've altered Git history, the usual <code>git push origin</code> <strong>will not</strong> work. You'll need to modify the command by "force-pushing" your latest changes:</p>
<pre><code><span># </span><span>Don<span>'t override changes</span></span>
<span>$ </span><span><span>git push origin main --force-with-lease</span></span>
<span>
# </span><span><span>Override changes</span></span>
<span>$ </span><span><span>git push origin main --force</span></span>
</code></pre>
<div>
<p>
Force pushing has serious implications because it changes the historical sequence of commits for the branch. Use it with caution, especially if your repository is being accessed by multiple people.</p>
</div>
<h2><a href="#further-reading">Further reading</a></h2>
<ul>
<li><a href="/en/get-started/using-git/resolving-merge-conflicts-after-a-git-rebase">Resolving merge conflicts after a Git rebase</a></li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>