<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Use cases and examples" href="/en/actions/use-cases-and-examples">Use cases and examples</a><span>/</span>
</li>
<li>
<a title="Build and test" href="/en/actions/use-cases-and-examples/building-and-testing">Build and test</a><span>/</span>
</li>
<li><a title="Build &amp; test .NET" href="/en/actions/use-cases-and-examples/building-and-testing/building-and-testing-net">Build &amp; test .NET</a></li>
</ul></nav></div>
<div>
<div><div><h1>Building and testing .NET</h1></div></div>
<div><div><p>You can create a continuous integration (CI) workflow to build and test your .NET project.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#introduction"><div><span>Introduction</span></div></a></li>
<li><a href="#prerequisites"><div><span>Prerequisites</span></div></a></li>
<li><a href="#using-a-net-workflow-template"><div><span>Using a .NET workflow template</span></div></a></li>
<li><a href="#specifying-a-net-version"><div><span>Specifying a .NET version</span></div></a></li>
<li><a href="#installing-dependencies"><div><span>Installing dependencies</span></div></a></li>
<li><a href="#building-and-testing-your-code"><div><span>Building and testing your code</span></div></a></li>
<li><a href="#packaging-workflow-data-as-artifacts"><div><span>Packaging workflow data as artifacts</span></div></a></li>
<li><a href="#publishing-to-package-registries"><div><span>Publishing to package registries</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#introduction">Introduction</a></h2>
<p>This guide shows you how to build, test, and publish a .NET package.</p>
<p>GitHub-hosted runners have a tools cache with preinstalled software, which includes the .NET Core SDK. For a full list of up-to-date software and the preinstalled versions of .NET Core SDK, see <a href="/en/actions/using-github-hosted-runners/about-github-hosted-runners">software installed on GitHub-hosted runners</a>.</p>
<h2><a href="#prerequisites">Prerequisites</a></h2>
<p>You should already be familiar with YAML syntax and how it's used with GitHub Actions. For more information, see <a href="/en/actions/using-workflows/workflow-syntax-for-github-actions">Workflow syntax for GitHub Actions</a>.</p>
<p>We recommend that you have a basic understanding of the .NET Core SDK. For more information, see <a href="https://dotnet.microsoft.com/learn">Getting started with .NET</a>.</p>
<h2><a href="#using-a-net-workflow-template">Using a .NET workflow template</a></h2>
<p>To get started quickly, add a workflow template to the <code>.github/workflows</code> directory of your repository.</p>
<p>GitHub provides a workflow template for .NET that should work for most .NET projects. The subsequent sections of this guide give examples of how you can customize this workflow template.</p>
<ol>
<li>
<p>On GitHub, navigate to the main page of the repository.</p>
</li>
<li>
<p>Under your repository name, click </p>
<div><picture><source><img src="/assets/cb-12958/images/help/repository/actions-tab-global-nav-update.png" alt='Screenshot of the tabs for the "github/docs" repository. The "Actions" tab is highlighted with an orange outline.' width="1242" height="186"></source></picture></div>
</li>
<li>
<p>If you already have a workflow in your repository, click <strong>New workflow</strong>.</p>
</li>
<li>
<p>The "Choose a workflow" page shows a selection of recommended workflow templates. Search for "dotnet".</p>
</li>
<li>
<p>On the ".NET" workflow, click <strong>Configure</strong>.</p>
</li>
<li>
<p>Edit the workflow as required. For example, change the .NET version.</p>
</li>
<li>
<p>Click <strong>Commit changes</strong>.</p>
<p>The <code>dotnet.yml</code> workflow file is added to the <code>.github/workflows</code> directory of your repository.</p>
</li>
</ol>
<h2><a href="#specifying-a-net-version">Specifying a .NET version</a></h2>
<p>To use a preinstalled version of the .NET Core SDK on a GitHub-hosted runner, use the <code>setup-dotnet</code> action. This action finds a specific version of .NET from the tools cache on each runner, and adds the necessary binaries to <code>PATH</code>. These changes will persist for the remainder of the job.</p>
<p>The <code>setup-dotnet</code> action is the recommended way of using .NET with GitHub Actions, because it ensures consistent behavior across different runners and different versions of .NET. If you are using a self-hosted runner, you must install .NET and add it to <code>PATH</code>. For more information, see the <a href="https://github.com/marketplace/actions/setup-net-core-sdk"><code>setup-dotnet</code></a> action.</p>
<h3><a href="#using-multiple-net-versions">Using multiple .NET versions</a></h3>
<pre><code><span>name:</span> <span>dotnet</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>strategy:</span>
      <span>matrix:</span>
        <span>dotnet-version:</span> [ <span>'3.1.x'</span>, <span>'6.0.x'</span> ]

    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>name:</span> <span>Setup</span> <span>dotnet</span> <span>${{</span> <span>matrix.dotnet-version</span> <span>}}</span>
        <span>uses:</span> <span>actions/setup-dotnet@v4</span>
        <span>with:</span>
          <span>dotnet-version:</span> <span>${{</span> <span>matrix.dotnet-version</span> <span>}}</span>
      <span># You can test your matrix by printing the current dotnet version</span>
      <span>-</span> <span>name:</span> <span>Display</span> <span>dotnet</span> <span>version</span>
        <span>run:</span> <span>dotnet</span> <span>--version</span>
</code></pre>
<h3><a href="#using-a-specific-net-version">Using a specific .NET version</a></h3>
<p>You can configure your job to use a specific version of .NET, such as <code>6.0.22</code>. Alternatively, you can use semantic version syntax to get the latest minor release. This example uses the latest minor release of .NET 6.</p>
<pre><code>    <span>-</span> <span>name:</span> <span>Setup</span> <span>.NET</span> <span>6.</span><span>x</span>
      <span>uses:</span> <span>actions/setup-dotnet@v4</span>
      <span>with:</span>
        <span># Semantic version range syntax or exact version of a dotnet version</span>
        <span>dotnet-version:</span> <span>'6.x'</span>
</code></pre>
<h2><a href="#installing-dependencies">Installing dependencies</a></h2>
<p>GitHub-hosted runners have the NuGet package manager installed. You can use the dotnet CLI to install dependencies from the NuGet package registry before building and testing your code. For example, the YAML below installs the <code>Newtonsoft</code> package.</p>
<pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Setup</span> <span>dotnet</span>
  <span>uses:</span> <span>actions/setup-dotnet@v4</span>
  <span>with:</span>
    <span>dotnet-version:</span> <span>'6.0.x'</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
  <span>run:</span> <span>dotnet</span> <span>add</span> <span>package</span> <span>Newtonsoft.Json</span> <span>--version</span> <span>12.0</span><span>.1</span>
</code></pre>
<h3><a href="#caching-dependencies">Caching dependencies</a></h3>
<p>You can cache NuGet dependencies for future workflows using the optional <code>cache</code> input. For example, the YAML below caches the NuGet <code>global-packages</code> folder, and then installs the <code>Newtonsoft</code> package. A second optional input, <code>cache-dependency-path</code>, can be used to specify the path to a dependency file: <code>packages.lock.json</code>.</p>
<p>For more information, see <a href="/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows">Caching dependencies to speed up workflows</a>.</p>
<pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Setup</span> <span>dotnet</span>
  <span>uses:</span> <span>actions/setup-dotnet@v4</span>
  <span>with:</span>
    <span>dotnet-version:</span> <span>'6.x'</span>
    <span>cache:</span> <span>true</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
  <span>run:</span> <span>dotnet</span> <span>add</span> <span>package</span> <span>Newtonsoft.Json</span> <span>--version</span> <span>12.0</span><span>.1</span>
</code></pre>
<div>
<p>
Depending on the number of dependencies, it may be faster to use the dependency cache. Projects with many large dependencies should see a performance increase as it cuts down the time required for downloading. Projects with fewer dependencies may not see a significant performance increase and may even see a slight decrease due to how NuGet installs cached dependencies. The performance varies from project to project.</p>
</div>
<h2><a href="#building-and-testing-your-code">Building and testing your code</a></h2>
<p>You can use the same commands that you use locally to build and test your code. This example demonstrates how to use <code>dotnet build</code> and <code>dotnet test</code> in a job:</p>
<pre><code><span>steps:</span>
<span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
<span>-</span> <span>name:</span> <span>Setup</span> <span>dotnet</span>
  <span>uses:</span> <span>actions/setup-dotnet@v4</span>
  <span>with:</span>
    <span>dotnet-version:</span> <span>'6.0.x'</span>
<span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
  <span>run:</span> <span>dotnet</span> <span>restore</span>
<span>-</span> <span>name:</span> <span>Build</span>
  <span>run:</span> <span>dotnet</span> <span>build</span> <span>--no-restore</span>
<span>-</span> <span>name:</span> <span>Test</span> <span>with</span> <span>the</span> <span>dotnet</span> <span>CLI</span>
  <span>run:</span> <span>dotnet</span> <span>test</span> <span>--no-build</span>
</code></pre>
<h2><a href="#packaging-workflow-data-as-artifacts">Packaging workflow data as artifacts</a></h2>
<p>After a workflow completes, you can upload the resulting artifacts for analysis. For example, you may need to save log files, core dumps, test results, or screenshots. The following example demonstrates how you can use the <code>upload-artifact</code> action to upload test results.</p>
<p>For more information, see <a href="/en/actions/using-workflows/storing-workflow-data-as-artifacts">Storing and sharing data from a workflow</a>.</p>
<pre><code><span>name:</span> <span>dotnet</span> <span>package</span>

<span>on:</span> [<span>push</span>]

<span>jobs:</span>
  <span>build:</span>

    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>strategy:</span>
      <span>matrix:</span>
        <span>dotnet-version:</span> [ <span>'3.1.x'</span>, <span>'6.0.x'</span> ]

      <span>steps:</span>
        <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
        <span>-</span> <span>name:</span> <span>Setup</span> <span>dotnet</span>
          <span>uses:</span> <span>actions/setup-dotnet@v4</span>
          <span>with:</span>
            <span>dotnet-version:</span> <span>${{</span> <span>matrix.dotnet-version</span> <span>}}</span>
        <span>-</span> <span>name:</span> <span>Install</span> <span>dependencies</span>
          <span>run:</span> <span>dotnet</span> <span>restore</span>
        <span>-</span> <span>name:</span> <span>Test</span> <span>with</span> <span>dotnet</span>
          <span>run:</span> <span>dotnet</span> <span>test</span> <span>--no-restore</span> <span>--logger</span> <span>trx</span> <span>--results-directory</span> <span>"TestResults-$<span>{{ matrix.dotnet-version }}</span>"</span>
        <span>-</span> <span>name:</span> <span>Upload</span> <span>dotnet</span> <span>test</span> <span>results</span>
          <span>uses:</span> <span>actions/upload-artifact@v4</span>
          <span>with:</span>
            <span>name:</span> <span>dotnet-results-${{</span> <span>matrix.dotnet-version</span> <span>}}</span>
            <span>path:</span> <span>TestResults-${{</span> <span>matrix.dotnet-version</span> <span>}}</span>
          <span># Use always() to always run this step to publish test results when there are test failures</span>
          <span>if:</span> <span>${{</span> <span>always()</span> <span>}}</span>
</code></pre>
<h2><a href="#publishing-to-package-registries">Publishing to package registries</a></h2>
<p>You can configure your workflow to publish your .NET package to a package registry when your CI tests pass. You can use repository secrets to store any tokens or credentials needed to publish your binary. The following example creates and publishes a package to GitHub Packages using <code>dotnet core cli</code>.</p>
<pre><code><span>name:</span> <span>Upload</span> <span>dotnet</span> <span>package</span>

<span>on:</span>
  <span>release:</span>
    <span>types:</span> [<span>created</span>]

<span>jobs:</span>
  <span>deploy:</span>
    <span>runs-on:</span> <span>ubuntu-latest</span>
    <span>permissions:</span>
      <span>packages:</span> <span>write</span>
      <span>contents:</span> <span>read</span>
    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>uses:</span> <span>actions/setup-dotnet@v4</span>
        <span>with:</span>
          <span>dotnet-version:</span> <span>'6.0.x'</span> <span># SDK Version to use.</span>
          <span>source-url:</span> <span>https://nuget.pkg.github.com/&lt;owner&gt;/index.json</span>
        <span>env:</span>
          <span>NUGET_AUTH_TOKEN:</span> <span>${{secrets.GITHUB_TOKEN}}</span>
      <span>-</span> <span>run:</span> <span>dotnet</span> <span>build</span> <span>--configuration</span> <span>Release</span> <span>&lt;my</span> <span>project&gt;</span>
      <span>-</span> <span>name:</span> <span>Create</span> <span>the</span> <span>package</span>
        <span>run:</span> <span>dotnet</span> <span>pack</span> <span>--configuration</span> <span>Release</span> <span>&lt;my</span> <span>project&gt;</span>
      <span>-</span> <span>name:</span> <span>Publish</span> <span>the</span> <span>package</span> <span>to</span> <span>GPR</span>
        <span>run:</span> <span>dotnet</span> <span>nuget</span> <span>push</span> <span>&lt;my</span> <span>project&gt;/bin/Release/*.nupkg</span>
</code></pre>
</div></div></div>
</div>
</div></main>
</div></body></html>