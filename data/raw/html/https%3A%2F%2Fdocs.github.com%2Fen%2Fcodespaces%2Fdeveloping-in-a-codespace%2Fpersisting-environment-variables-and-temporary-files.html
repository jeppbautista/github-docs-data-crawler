<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Codespaces" href="/en/codespaces">Codespaces</a><span>/</span>
</li>
<li>
<a title="Developing in a codespace" href="/en/codespaces/developing-in-a-codespace">Developing in a codespace</a><span>/</span>
</li>
<li><a title="Persist variables and files" href="/en/codespaces/developing-in-a-codespace/persisting-environment-variables-and-temporary-files">Persist variables and files</a></li>
</ul></nav></div>
<div>
<div><div><h1>Persisting environment variables and temporary files</h1></div></div>
<div><div><p>You can configure custom environment variables so that they are set to the same value every time you open a codespace. You can also ensure that temporary files are not deleted when a codespace stops.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#setting-persistent-environment-variables"><div><span>Setting persistent environment variables</span></div></a></li>
<li><a href="#preventing-temporary-files-from-being-automatically-deleted"><div><span>Preventing temporary files from being automatically deleted</span></div></a></li>
<li><a href="#further-reading"><div><span>Further reading</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#setting-persistent-environment-variables">Setting persistent environment variables</a></h2>
<p>You can set persistent custom environment variables in multiple ways, depending on which codespaces, repositories, or users you want the variables to be available to.</p>
<p>For all the methods of setting custom variables listed below, you can access the custom variable in your codespace by using syntax like <code>echo $VARNAME</code>.</p>
<h3><a href="#for-a-single-codespace">For a single codespace</a></h3>
<p>You can set the value of the environment variable in the <code>~/.bashrc</code> file, or in an equivalent configuration file if you are not using the Bash shell. For example, add the statement <code>VARNAME=value</code>.</p>
<p>After you save the change to this file, the value will be set the next time you open the codespace, or you can set it immediately by using a command such as <code>source ~/.bashrc</code>. The variable will remain set if you stop and start the codespace. However, changes to files in the home directory will be reset if you rebuild the container, so variables set in the <code>~/.bashrc</code> file will not persist over a rebuild. For more information, see <a href="#preventing-temporary-files-from-being-automatically-deleted">Preventing temporary files from being automatically deleted</a>.</p>
<h3><a href="#for-all-codespaces-for-a-repository">For all codespaces for a repository</a></h3>
<p>There are three ways that you can set persistent custom environment variables for all codespaces that you create for a repository:</p>
<ul>
<li>You can edit the <code>devcontainer.json</code> configuration file for the repository.</li>
<li>You can use a custom Dockerfile.</li>
<li>You can use development environment secrets.</li>
</ul>
<h4><a href="#edit-the-devcontainerjson-configuration-file-for-the-repository">Edit the <code>devcontainer.json</code> configuration file for the repository</a></h4>
<p>Edit the <code>devcontainer.json</code> configuration file for the repository, and use the <code>remoteEnv</code> property to set the environment variable value:</p>
<pre><code><span>{</span>
  <span>"remoteEnv"</span><span>:</span> <span>{</span>
    <span>"VARNAME"</span><span>:</span> <span>"value"</span>
  <span>}</span>
<span>}</span>
</code></pre>
<p>Only use this method for values that you are happy to commit to your repository as plaintext. For sensitive values such as access tokens, use development environment secrets.</p>
<p>The environment variable will be set within your editor's remote server process, and will be available for sub-processes of that remote server process, such as terminals and debugging sessions. However, the variable will not be available more broadly inside the container. This method is useful if you don't need the environment variable to be set for other background processes that run at startup, and if you are using a premade image and don't have or want a custom Dockerfile.</p>
<p>This setting will take effect when you rebuild your container or create a new codespace after pushing this change to the repository. For more information about applying configuration changes to a codespace, see <a href="/en/codespaces/setting-up-your-project-for-codespaces/adding-a-dev-container-configuration/introduction-to-dev-containers">Introduction to dev containers</a>.</p>
<h4><a href="#use-a-custom-dockerfile">Use a custom Dockerfile</a></h4>
<p>If you are using a custom Dockerfile you can set the environment variable there by adding <code>ENV VARNAME=value</code>.</p>
<p>This method is useful if you already have a Dockerfile and want to set a variable on a container-wide level.</p>
<p>This setting will take effect when you rebuild your container or create a new codespace after pushing this change to the repository. For more information about applying configuration changes to a codespace, see <a href="/en/codespaces/setting-up-your-project-for-codespaces/adding-a-dev-container-configuration/introduction-to-dev-containers">Introduction to dev containers</a>.</p>
<h4><a href="#use-development-environment-secrets">Use development environment secrets</a></h4>
<p>You can use development environment secrets for GitHub Codespaces to set custom variables for codespaces created for the repository. For more information, see <a href="/en/codespaces/managing-your-codespaces/managing-your-account-specific-secrets-for-github-codespaces">Managing your account-specific secrets for GitHub Codespaces</a>.</p>
<p>You should use this method for environment variable values that you do not want to commit to the repository as plaintext.</p>
<p>This setting will take effect the next time you create a codespace for this repository, or when you restart an existing codespace.</p>
<h3><a href="#for-all-codespaces-that-you-create">For all codespaces that you create</a></h3>
<p>If you want to set a personalized environment variable for all codespaces that you create you can set this using a file in your <code>dotfiles</code> repository. For example, add <code>VARNAME=value</code> in the <code>.bash_profile</code> file. Environment variables you set in a dotfile are personal to you and are not set for anyone else. For more information about Dotfiles, see <a href="/en/codespaces/setting-your-user-preferences/personalizing-github-codespaces-for-your-account#dotfiles">Personalizing GitHub Codespaces for your account</a>.</p>
<h2><a href="#preventing-temporary-files-from-being-automatically-deleted">Preventing temporary files from being automatically deleted</a></h2>
<p>When you create a codespace, your repository is cloned into the <code>/workspaces</code> directory in your codespace. This is a persistent directory that is mounted into the container. Any changes you make inside this directory, including editing, adding, or deleting files, are preserved when you stop and start the codespace, and when you rebuild the container in the codespace.</p>
<p>Outside the <code>/workspaces</code> directory, your codespace contains a Linux directory structure that varies depending on the dev container image used to build your codespace. You can add files or make changes to files outside the <code>/workspaces</code> directory. For example, you can install new programs, or you can set up your shell configuration in a file such as <code>~/.bashrc</code>. As a non-root user, you may not automatically have write access to certain directories, but most images allow root access to these directories with the <code>sudo</code> command.</p>
<p>Outside <code>/workspaces</code>, with the exception of the <code>/tmp</code> directory, the directories in a codespace are tied to the lifecycle of the container. This means any changes you make are preserved when you stop and start your codespace, but are not preserved when you rebuild the container. For information about creating symlinks to preserve data outside the <code>/workspaces</code> directory, see <a href="/en/codespaces/developing-in-a-codespace/rebuilding-the-container-in-a-codespace#persisting-data-over-a-rebuild">Rebuilding the container in a codespace</a>.</p>
<p>The <code>/tmp</code> directory is an exception because it is mounted into the container, but it is not persistent. Therefore, the contents of the <code>/tmp</code> directory are persisted over a rebuild, but are cleared each time the codespace stops. For example, the <code>/tmp</code> directory is cleared when a codespace session times out after a period of inactivity. For more information, see <a href="/en/codespaces/setting-your-user-preferences/setting-your-timeout-period-for-github-codespaces">Setting your timeout period for GitHub Codespaces</a>.</p>
<p>If you have temporary files that you want to be available the next time you start the codespace, do not save them in the <code>/tmp</code> directory.</p>
<h2><a href="#further-reading">Further reading</a></h2>
<ul>
<li><a href="/en/codespaces/customizing-your-codespace/changing-the-shell-in-a-codespace">Changing the shell in a codespace</a></li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>