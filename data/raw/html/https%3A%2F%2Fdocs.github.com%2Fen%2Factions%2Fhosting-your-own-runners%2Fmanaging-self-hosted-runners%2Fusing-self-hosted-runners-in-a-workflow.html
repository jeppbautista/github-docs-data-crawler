<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Self-hosted runners" href="/en/actions/hosting-your-own-runners">Self-hosted runners</a><span>/</span>
</li>
<li>
<a title="Manage self-hosted runners" href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners">Manage self-hosted runners</a><span>/</span>
</li>
<li><a title="Use runners in a workflow" href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners/using-self-hosted-runners-in-a-workflow">Use runners in a workflow</a></li>
</ul></nav></div>
<div>
<div><div><h1>Using self-hosted runners in a workflow</h1></div></div>
<div><div><p>To use self-hosted runners in a workflow, you can use labels or groups to specify the runner for a job.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#about-self-hosted-runner-labels"><div><span>About self-hosted runner labels</span></div></a></li>
<li><a href="#about-self-hosted-runner-groups"><div><span>About self-hosted runner groups</span></div></a></li>
<li><a href="#viewing-available-runners-for-a-repository"><div><span>Viewing available runners for a repository</span></div></a></li>
<li><a href="#using-default-labels-to-route-jobs"><div><span>Using default labels to route jobs</span></div></a></li>
<li><a href="#using-custom-labels-to-route-jobs"><div><span>Using custom labels to route jobs</span></div></a></li>
<li><a href="#using-groups-to-route-jobs"><div><span>Using groups to route jobs</span></div></a></li>
<li><a href="#using-labels-and-groups-to-route-jobs"><div><span>Using labels and groups to route jobs</span></div></a></li>
<li><a href="#routing-precedence-for-self-hosted-runners"><div><span>Routing precedence for self-hosted runners</span></div></a></li>
<li><a href="#workflow-run-continuity"><div><span>Workflow run continuity</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<p>You can target self-hosted runners for use in a workflow based on the labels assigned to the runners, or their group membership, or a combination of these.</p>
<div>
<p>Runner Scale Sets do not support multiple labels, only the name of the runner can be used in place of a label. See <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/deploying-runner-scale-sets-with-actions-runner-controller">Deploying runner scale sets with Actions Runner Controller</a>.</p>
</div>
<h2><a href="#about-self-hosted-runner-labels">About self-hosted runner labels</a></h2>
<p>Labels allow you to send workflow jobs to specific types of self-hosted runners, based on their shared characteristics. For example, if your job requires a particular hardware component or software package, you can assign a custom label to a runner and then configure your job to only execute on runners with that label.</p>
<p>To specify a self-hosted runner for your job, configure <code>runs-on</code> in your workflow file with self-hosted runner labels.</p>
<p>Self-hosted runners may have the <code>self-hosted</code> label. When setting up a self-hosted runner, by default we will include the label <code>self-hosted</code>. You may pass in the <code>--no-default-labels</code> flag to prevent the self-hosted label from being applied. Labels can be used to create targeting options for runners, such as operating system or architecture, we recommend providing an array of labels that begins with <code>self-hosted</code> (this must be listed first) and then includes additional labels as needed. When you specify an array of labels, jobs will be queued on runners that have all the labels that you specify.</p>
<p>Note that Actions Runner Controller does not support multiple labels and does not support the <code>self-hosted</code> label.</p>
<p>For information on creating custom and default labels, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners/using-labels-with-self-hosted-runners">Using labels with self-hosted runners</a>.</p>
<h2><a href="#about-self-hosted-runner-groups">About self-hosted runner groups</a></h2>
<p>For self-hosted runners defined at the organization level, you can group your runners with shared characteristics into a single runner group and then configure your job to target the runner group.</p>
<p>To specify a self-hosted runner group for your job, configure <code>runs-on.group</code> in your workflow file.</p>
<p>For information on creating and managing runner groups, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners/managing-access-to-self-hosted-runners-using-groups">Managing access to self-hosted runners using groups</a>.</p>
<h2><a href="#viewing-available-runners-for-a-repository">Viewing available runners for a repository</a></h2>
<p>If you have <code>repo: write</code> access to a repository, you can view a list of the runners available to the repository.</p>
<ol>
<li>
<p>On GitHub, navigate to the main page of the repository.</p>
</li>
<li>
<p>Under your repository name, click </p>
<div><picture><source><img src="/assets/cb-12958/images/help/repository/actions-tab-global-nav-update.png" alt='Screenshot of the tabs for the "github/docs" repository. The "Actions" tab is highlighted with an orange outline.' width="1242" height="186"></source></picture></div>
</li>
<li>
<p>In the left sidebar, under the "Management" section, click </p>
</li>
<li>
<p>Click the <strong>Self hosted</strong> tab at the top of the list of runners.</p>
</li>
<li>
<p>Review the list of available self-hosted runners for the repository. This list includes both self-hosted runners and runner scale sets created with Actions Runner Controller. For more information, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/about-actions-runner-controller">About Actions Runner Controller</a>.</p>
</li>
<li>
<p>Optionally, to copy a runner's label to use it in a workflow, click <strong>Copy label</strong>.</p>
</li>
</ol>
<div>
<p>
Enterprise and organization owners can create runners from this page. To create a new runner, click <strong>New runner</strong> at the top right of the list of runners to add runners to the repository.</p>
<p>For more information, see <a href="/en/actions/using-github-hosted-runners/managing-larger-runners">Managing larger runners</a> and <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners/adding-self-hosted-runners">Adding self-hosted runners</a>.</p>
</div>
<h2><a href="#using-default-labels-to-route-jobs">Using default labels to route jobs</a></h2>
<p>A self-hosted runner automatically receives certain labels when it is added to GitHub Actions. These are used to indicate its operating system and hardware platform:</p>
<ul>
<li>
<code>self-hosted</code>: Default label applied to self-hosted runners.</li>
<li>
<code>linux</code>, <code>windows</code>, or <code>macOS</code>: Applied depending on operating system.</li>
<li>
<code>x64</code>, <code>ARM</code>, or <code>ARM64</code>: Applied depending on hardware architecture.</li>
</ul>
<p>You can use your workflow's YAML to send jobs to a combination of these labels. In this example, a self-hosted runner that matches all three labels will be eligible to run the job:</p>
<pre><code><span>runs-on:</span> [<span>self-hosted</span>, <span>linux</span>, <span>ARM64</span>]
</code></pre>
<ul>
<li>
<code>self-hosted</code> - Run this job on a self-hosted runner.</li>
<li>
<code>linux</code> - Only use a Linux-based runner.</li>
<li>
<code>ARM64</code> - Only use a runner based on ARM64 hardware.</li>
</ul>
<p>To create individual self-hosted runners without the default labels, pass the <code>--no-default-labels</code> flag when you create the runner. Actions Runner Controller does not support multiple labels.</p>
<h2><a href="#using-custom-labels-to-route-jobs">Using custom labels to route jobs</a></h2>
<p>You can create custom labels and assign them to your self-hosted runners at any time. Custom labels let you send jobs to particular types of self-hosted runners, based on how they're labeled.</p>
<p>For example, if you have a job that requires a specific type of graphics hardware, you can create a custom label called <code>gpu</code> and assign it to the runners that have the hardware installed. A self-hosted runner that matches all the assigned labels will then be eligible to run the job.</p>
<p>This example shows a job that combines default and custom labels:</p>
<pre><code><span>runs-on:</span> [<span>self-hosted</span>, <span>linux</span>, <span>x64</span>, <span>gpu</span>]
</code></pre>
<ul>
<li>
<code>self-hosted</code> - Run this job on a self-hosted runner.</li>
<li>
<code>linux</code> - Only use a Linux-based runner.</li>
<li>
<code>x64</code> - Only use a runner based on x64 hardware.</li>
<li>
<code>gpu</code> - This custom label has been manually assigned to self-hosted runners with the GPU hardware installed.</li>
</ul>
<p>These labels operate cumulatively, so a self-hosted runner must have all four labels to be eligible to process the job.</p>
<h2><a href="#using-groups-to-route-jobs">Using groups to route jobs</a></h2>
<p>In this example, Ubuntu runners have been added to a group called <code>ubuntu-runners</code>. The <code>runs-on</code> key sends the job to any available runner in the <code>ubuntu-runners</code> group:</p>
<pre><code><span>name:</span> <span>learn-github-actions</span>
<span>on:</span> [<span>push</span>]
<span>jobs:</span>
  <span>check-bats-version:</span>
    <span>runs-on:</span> 
      <span>group:</span> <span>ubuntu-runners</span>
    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>uses:</span> <span>actions/setup-node@v4</span>
        <span>with:</span>
          <span>node-version:</span> <span>'14'</span>
      <span>-</span> <span>run:</span> <span>npm</span> <span>install</span> <span>-g</span> <span>bats</span>
      <span>-</span> <span>run:</span> <span>bats</span> <span>-v</span>
</code></pre>
<h2><a href="#using-labels-and-groups-to-route-jobs">Using labels and groups to route jobs</a></h2>
<p>When you combine groups and labels, the runner must meet both requirements to be eligible to run the job.</p>
<p>In this example, a runner group called <code>ubuntu-runners</code> is populated with Ubuntu runners, which have also been assigned the label <code>ubuntu-20.04-16core</code>. The <code>runs-on</code> key combines <code>group</code> and <code>labels</code> so that the job is routed to any available runner within the group that also has a matching label:</p>
<pre><code><span>name:</span> <span>learn-github-actions</span>
<span>on:</span> [<span>push</span>]
<span>jobs:</span>
  <span>check-bats-version:</span>
    <span>runs-on:</span>
      <span>group:</span> <span>ubuntu-runners</span>
      <span>labels:</span> <span>ubuntu-20.04-16core</span>
    <span>steps:</span>
      <span>-</span> <span>uses:</span> <span>actions/checkout@v4</span>
      <span>-</span> <span>uses:</span> <span>actions/setup-node@v4</span>
        <span>with:</span>
          <span>node-version:</span> <span>'14'</span>
      <span>-</span> <span>run:</span> <span>npm</span> <span>install</span> <span>-g</span> <span>bats</span>
      <span>-</span> <span>run:</span> <span>bats</span> <span>-v</span>
</code></pre>
<h2><a href="#routing-precedence-for-self-hosted-runners">Routing precedence for self-hosted runners</a></h2>
<p>When routing a job to a self-hosted runner, GitHub looks for a runner that matches the job's <code>runs-on</code> labels and groups:</p>
<ul>
<li>If GitHub finds an online and idle runner that matches the job's <code>runs-on</code> labels and groups, the job is then assigned and sent to the runner.
<ul>
<li>If the runner doesn't pick up the assigned job within 60 seconds, the job is re-queued so that a new runner can accept it.</li>
</ul>
</li>
<li>If GitHub doesn't find an online and idle runner that matches the job's <code>runs-on</code> labels and groups, then the job will remain queued until a runner comes online.</li>
<li>If the job remains queued for more than 24 hours, the job will fail.</li>
</ul>
<h2><a href="#workflow-run-continuity">Workflow run continuity</a></h2>
<p>If GitHub Actions services are temporarily unavailable, then a workflow run is discarded if it has not been queued within 30 minutes of being triggered. For example, if a workflow is triggered and the GitHub Actions services are unavailable for 31 minutes or longer, then the workflow run will not be processed.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>