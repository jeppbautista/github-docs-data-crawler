<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Secure coding" href="/en/code-security">Secure coding</a><span>/</span>
</li>
<li>
<a title="Code scanning" href="/en/code-security/code-scanning">Code scanning</a><span>/</span>
</li>
<li>
<a title="Troubleshooting code scanning" href="/en/code-security/code-scanning/troubleshooting-code-scanning">Troubleshooting code scanning</a><span>/</span>
</li>
<li><a title="C# compiler failing" href="/en/code-security/code-scanning/troubleshooting-code-scanning/c-sharp-compiler-unexpectedly-failing">C# compiler failing</a></li>
</ul></nav></div>
<div>
<div><div><h1>C# compiler unexpectedly failing</h1></div></div>
<div><div><p>If your MSBuild C# compilation is unexpectedly failing, you may need to amend your application project file.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#about-these-errors"><div><span>About these errors</span></div></a></li>
<li><a href="#confirming-the-cause-of-the-problem"><div><span>Confirming the cause of the problem</span></div></a></li>
<li><a href="#fixing-the-problem"><div><span>Fixing the problem</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#about-these-errors">About these errors</a></h2>
<p>The CodeQL tracer injects some flags into the C# compiler invocation to ensure every component is built and included in the CodeQL database, which may cause your C# code to build differently to what you expect during CodeQL analysis. See <a href="/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/codeql-code-scanning-for-compiled-languages">CodeQL code scanning for compiled languages</a>.</p>
<p><code>/p:EmitCompilerGeneratedFiles=true</code> is one of the injected properties, and emits compiler-generated files during the build process. This option causes the compiler to generate additional files that are used to support features such as improved regular expression support, serialization, and web application view generation. These generated artifacts are typically not written to disk by the compiler, but setting the option to <code>true</code> forces writing the files to disk, and so the extractor can process the files.</p>
<p>For some legacy projects, and projects that use <code>.sqlproj</code> files, you may see that the injected <code>/p:EmitCompilerGeneratedFiles=true</code> property causes unexpected issues with <code>msbuild</code>.</p>
<h2><a href="#confirming-the-cause-of-the-problem">Confirming the cause of the problem</a></h2>
<p>If you have set the "treat warnings as errors" flag, then <code>msbuild</code> will produce an error, which will cause the extraction to fail.</p>
<h2><a href="#fixing-the-problem">Fixing the problem</a></h2>
<p>You should add the <code>&lt;CompilerGeneratedFilesOutputPath&gt;</code> element to the application's project file. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file">Understanding the project file</a> in Microsoft Learn.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>