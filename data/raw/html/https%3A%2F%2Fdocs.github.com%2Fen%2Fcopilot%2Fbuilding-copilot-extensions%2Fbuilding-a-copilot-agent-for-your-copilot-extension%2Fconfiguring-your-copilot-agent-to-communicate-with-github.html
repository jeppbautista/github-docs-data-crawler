<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Copilot" href="/en/copilot">GitHub Copilot</a><span>/</span>
</li>
<li>
<a title="Build Copilot Extensions" href="/en/copilot/building-copilot-extensions">Build Copilot Extensions</a><span>/</span>
</li>
<li>
<a title="Build a Copilot agent" href="/en/copilot/building-copilot-extensions/building-a-copilot-agent-for-your-copilot-extension">Build a Copilot agent</a><span>/</span>
</li>
<li><a title="Communicate with GitHub" href="/en/copilot/building-copilot-extensions/building-a-copilot-agent-for-your-copilot-extension/configuring-your-copilot-agent-to-communicate-with-github">Communicate with GitHub</a></li>
</ul></nav></div>
<div>
<div><div><h1>Configuring your Copilot agent to communicate with GitHub</h1></div></div>
<div><div><p>Learn how to verify payloads and get resources from GitHub with your Copilot agent.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#prerequisites"><div><span>Prerequisites</span></div></a></li>
<li><a href="#verifying-that-payloads-are-coming-from-github"><div><span>Verifying that payloads are coming from GitHub</span></div></a></li>
<li><a href="#fetching-resources-from-the-github-api"><div><span>Fetching resources from the GitHub API</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#prerequisites">Prerequisites</a></h2>
<p>Before you configure your Copilot agent to communicate with GitHub, you should understand how your Copilot agent communicates with the Copilot platform. See <a href="/en/copilot/building-copilot-extensions/building-a-copilot-agent-for-your-copilot-extension/configuring-your-copilot-agent-to-communicate-with-the-copilot-platform">Configuring your Copilot agent to communicate with the Copilot platform</a>.</p>
<h2><a href="#verifying-that-payloads-are-coming-from-github">Verifying that payloads are coming from GitHub</a></h2>
<p>Before your Copilot agent begins processing a request, you should verify that the request came from GitHub, and that it is intended for your agent. All agent requests contain the <code>X-GitHub-Public-Key-Identifier</code> and <code>X-GitHub-Public-Key-Signature</code> headers. To verify the signature for a particular request, compare the signature in the <code>X-GitHub-Public-Key-Signature</code> header with a signed copy of the request body using the current public key listed at <a href="https://api.github.com/meta/public_keys/copilot_api">https://api.github.com/meta/public_keys/copilot_api</a>.</p>
<p>For more details and examples of signature verification in specific languages, see the <a href="https://github.com/github-technology-partners/signature-verification"><code>github-technology-partners/signature-verification</code></a> repository.</p>
<blockquote>
<p>⚠️ <strong>Note:</strong> We currently send duplicate pairs of these headers. One set has the prefix <code>Github-Public-...</code>; the other has <code>X-GitHub-Public...</code>. The former will be closing down <strong>by March 31st</strong>. Please update your relevant checks to the correct prefix (<code>X-GitHub-Public...</code>) by then.</p>
</blockquote>
<h2><a href="#fetching-resources-from-the-github-api">Fetching resources from the GitHub API</a></h2>
<p>Requests to your Copilot agent will receive an <code>X-GitHub-Token</code> header. This header contains an API token that can be used to fetch resources from the GitHub API on behalf of the user interacting with your agent. The permissions of this token are the overlap of the user's own permissions and the permissions granted to your GitHub App installation.</p>
<p>For an example of how you might use <code>X-GitHub-Token</code>, see the following code sample:</p>
<pre><code><span>async</span> <span>function</span> <span>whoami</span>(<span>req</span>) {
  <span>const</span> response = <span>await</span> <span>fetch</span>(
    <span>// The GitHub API endpoint for the authenticated user</span>
    <span>"https://api.github.com/user"</span>,
    {
      <span>headers</span>: {
        <span>"Authorization"</span>: <span>`Bearer <span>${req.headers.get(<span>"x-github-token"</span>)}</span>`</span>
      }
    }
  )

  <span>const</span> user = <span>await</span> response.<span>json</span>()
  <span>return</span> user
}
</code></pre>
<p>To learn more about working with GitHub's API and explore official software development kits (SDKs), see the <a href="https://github.com/octokit"><code>octokit</code></a> organization.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>