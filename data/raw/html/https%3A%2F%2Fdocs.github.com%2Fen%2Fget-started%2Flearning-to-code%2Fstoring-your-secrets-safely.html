<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Get started" href="/en/get-started">Get started</a><span>/</span>
</li>
<li>
<a title="Learn to code" href="/en/get-started/learning-to-code">Learn to code</a><span>/</span>
</li>
<li><a title="Storing secrets safely" href="/en/get-started/learning-to-code/storing-your-secrets-safely">Storing secrets safely</a></li>
</ul></nav></div>
<div>
<div><div><h1>Storing your secrets safely</h1></div></div>
<div><div><p>Learn about secrets in software development and how you can manage them safely.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#what-is-a-secret"><div><span>What is a secret?</span></div></a></li>
<li><a href="#best-practices-for-managing-your-secrets"><div><span>Best practices for managing your secrets</span></div></a></li>
<li><a href="#how-github-helps-keep-your-secrets-secure"><div><span>How GitHub helps keep your secrets secure</span></div></a></li>
<li><a href="#practicing-safely-storing-a-secret"><div><span>Practicing safely storing a secret</span></div></a></li>
<li><a href="#next-steps"><div><span>Next steps</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<h2><a href="#what-is-a-secret">What is a secret?</a></h2>
<p>In software development, a secret is a piece of sensitive information that is used to authenticate or authorize access to systems, services, data, and APIs. Examples include:</p>
<ul>
<li>
<strong>API keys</strong> and <strong>access tokens</strong> that allow you to interact with external services such as GitHub's REST API. Access tokens also allow services, such as GitHub Actions, to perform tasks that need authentication, as we will experiment with later.</li>
<li>
<strong>Database credentials</strong> that grant access to local and external databases and storage.</li>
<li>
<strong>Private keys</strong>, such as private SSH and PGP keys, that can be used to access other servers and encrypt data.</li>
</ul>
<p>Since secrets provide so much access, including to critical systems, we can understand why it's so important to keep your <strong>secrets secure</strong>.</p>
<h3><a href="#what-can-happen-when-a-secret-is-exposed">What can happen when a secret is exposed?</a></h3>
<ul>
<li>Attackers can gain <strong>unauthorized access</strong> to everything the secret allows access to.</li>
<li>Hackers can <strong>steal data</strong>, including sensitive user data. This may have privacy and legal ramifications and harm trust in you and your application.</li>
<li>Exposed secrets can <strong>cost you money</strong> if hackers run unauthorized workloads on your cloud provider accounts.</li>
<li>Hackers can use an exposed secret to delete, modify, and disrupt servers which can cause <strong>downtime and data loss</strong>.</li>
</ul>
<p>Consider all the access and abilities a secret grants you and what a hacker could do with it. For example, if a personal access token for your GitHub account was exposed, a hacker could post and make changes on GitHub as you.</p>
<h2><a href="#best-practices-for-managing-your-secrets">Best practices for managing your secrets</a></h2>
<p>To avoid these types of issues, follow best practices to prevent leaks and limit damage if a secret is ever exposed.</p>
<h3><a href="#follow-the-principle-of-least-privilege-polp">Follow the <strong>Principle of Least Privilege (PoLP)</strong></a></h3>
<p>Whenever possible, restrict what a secret can do and can access to only what is necessary. For example:</p>
<ul>
<li>If a secret will only be used to read data and not make changes to data, opt to make it <strong>read only</strong>.</li>
<li>If the API you're using allows you to limit a secret to only particular scopes or permissions, only select <strong>the ones that you need</strong>. For example, if you only need to create issues with a GitHub secret, there's no reason for the secret to have access to repository contents or anything else.</li>
<li>If a secret will give an attacker full access to the user account that owns it, <strong>consider creating service accounts</strong> that can take ownership of the secret.</li>
</ul>
<h3><a href="#protect-secrets-in-your-application">Protect secrets in your application</a></h3>
<ul>
<li>
<strong>Never hardcode a secret</strong>. Always use <strong>environment variables</strong> or your platform's secret management tools (such as GitHub's repository secrets).</li>
<li>If you have to share a secret with someone, use a dedicated tool like a <strong>password manager</strong>. Never send secrets via email or instant message.</li>
<li>If possible, set <strong>expiration dates</strong> and <strong>rotate your secrets</strong> regularly; this reduces the risk of old secrets being exploited.</li>
<li>If your application produces a log, ensure that <strong>secrets are redacted before being logged</strong>. Otherwise, active secrets could be saved to plaintext files.</li>
</ul>
<h3><a href="#limit-damage-if-a-secret-is-exposed">Limit damage if a secret is exposed</a></h3>
<ul>
<li>Consider the secret compromised, even if only exposed for a second, and <strong>revoke the secret immediately</strong>. Then, generate a new secret and store it safely.</li>
<li>Check any <strong>activity logs</strong> that might show any suspicious activity performed with the compromised secret.</li>
<li>Consider how the secret was exposed and make changes to your processes so this can't happen again.</li>
</ul>
<h2><a href="#how-github-helps-keep-your-secrets-secure">How GitHub helps keep your secrets secure</a></h2>
<p>There's a lot that you can do to keep your secrets safe, but there's also a lot that GitHub does to help keep your secrets secret. Everyone makes mistakes, and we're here to help with features that will catch any secrets you accidentally expose:</p>
<ul>
<li>
<strong>Push protection</strong>, which we'll experiment with later, blocks pushing secrets to your repositories on GitHub.</li>
<li>
<strong>Secret scanning</strong> scans repositories and creates alerts when it discovers a secret. For some secrets, we also notify the provider so they can take action, such as revoking the secret automatically.</li>
</ul>
<h2><a href="#practicing-safely-storing-a-secret">Practicing safely storing a secret</a></h2>
<p>In this exercise, we'll create a personal access token and store it safely so we can use it with GitHub Actions. The action we'll create is a straightforward workflow that responds to an issue.</p>
<h3><a href="#1-creating-a-practice-repository">1. Creating a practice repository</a></h3>
<p>We'll start by creating a repository to work from. The <code>new2code</code> account has a template repository we can use to quickly get started.</p>
<ol>
<li>Navigate to the <a href="https://github.com/new?template_owner=new2code&amp;template_name=secret-action">new repository page</a>. Following this link will pre-select the template on the <code>new2code</code> account.</li>
<li>Under "Owner", make sure your user account is selected.</li>
<li>In the "Repository name" field, type <code>secret-action</code>.</li>
<li>Beneath the description field, select <strong>Public</strong> to set the repository visibility.</li>
<li>Click <strong>Create repository</strong>.</li>
</ol>
<h3><a href="#2-committing-a-dummy-token">2. Committing a dummy token</a></h3>
<p>Everyone makes mistakes, and it's possible that you'll accidentally commit a secret at some point in your coding journey. In this exercise, we'll intentionally commit a <strong>fake token</strong> so that we can become familiar and comfortable with the alert that gets triggered.</p>
<ol>
<li>
<p>Navigate to the repository you just created.</p>
</li>
<li>
<p>Navigate to the YAML workflow file by clicking <code>.github/workflows</code> in the list of files.</p>
</li>
<li>
<p>Open the workflow file by clicking <code>comment.yml</code> in the list of files.</p>
</li>
<li>
<p>To edit the workflow file, at the top-right, click </p>
</li>
<li>
<p>On line 13, <code>GH_TOKEN: ""</code>, insert this dummy token between the quotes:</p>
<pre><code>secret_scanning_ab85fc6f8d7638cf1c11da812da308d43_abcde
</code></pre>
<p>The end result should look like this:</p>
<pre><code><span>GH_TOKEN:</span> <span>"secret_scanning_ab85fc6f8d7638cf1c11da812da308d43_abcde"</span>
</code></pre>
</li>
<li>
<p>To attempt to commit the change, at the top right, click <strong>Commit changes...</strong> and then click <strong>Commit changes</strong> again in the dialog.</p>
</li>
<li>
<p>You should now see the push protection alert, telling you that "Secret scanning found a GitHub Secret Scanning secret on line 13".</p>
<div><picture><source><img src="/assets/cb-89243/images/help/security/push-protection-example.png" alt='Screenshot of a push protection alert for Line 13 of the file we attempted to commit. The "Cancel" button is highlighted in an orange outline.' width="419" height="568"></source></picture></div>
<p>If we weren't experimenting with a dummy token, this would alert us that we were one step away from exposing a token. Review the options you can select on the alert.</p>
</li>
<li>
<p>To stop your commit and avoid exposing the secret, click <strong>Cancel</strong>. In the top right, click <strong>Cancel changes</strong>, then discard your unsaved changes if prompted.</p>
</li>
</ol>
<h3><a href="#3-creating-a-real-token">3. Creating a real token</a></h3>
<p>Now, let's try following our best practices. First, we'll create a personal access token which will allow the action to act on your behalf (the comment it creates will appear to come from your user account).</p>
<div>
<p> Notice how we follow the Principle of Least Privilege for each configuration step. Your token will have the shortest expiration necessary, only have access to the repository it needs, and have the minimum permissions needed to work.</p>
</div>
<ol>
<li>Navigate to the <a href="https://github.com/settings/personal-access-tokens/new">new personal access token page</a>.</li>
<li>Under "Token name", give your new token a name. You can use something like "Action token".</li>
<li>Under "Expiration", select "7 days".</li>
<li>Under "Repository access", select <strong>Only select repositories</strong>.</li>
<li>In the "Select repositories" dropdown, select <strong>just</strong> the practice repository you created earlier.</li>
<li>To the right of "Repository permissions" in the "Permissions" section, click </li>
<li>Scroll down to "Issues" and, in the dropdown on the right, select "Read and write".</li>
<li>At the bottom of the page, click <strong>Generate token</strong>. If prompted, confirm by clicking <strong>Generate token</strong> again.</li>
</ol>
<p>It's crucial to handle the resulting token securely from this moment forward. As we'll be using the token shortly, you can copy it to your clipboard briefly.</p>
<h3><a href="#4-storing-the-token-safely">4. Storing the token safely</a></h3>
<p>We can now store our new token safely in our repository.</p>
<ol>
<li>
<p>Navigate to the repository you created at the beginning of the exercise.</p>
</li>
<li>
<p>Under your repository name, click <strong>Settings</strong>.</p>
<div><picture><source><img src="/assets/cb-28260/images/help/repository/repo-actions-settings.png" alt='Screenshot of a repository header showing the tabs. The "Settings" tab is highlighted by a dark orange outline.' width="720" height="71"></source></picture></div>
</li>
<li>
<p>In the "Security" section of the sidebar, select <strong>Actions</strong>.</p>
</li>
<li>
<p>Under "Repository secrets," click <strong>New repository secret</strong>.</p>
</li>
<li>
<p>In the <strong>Name</strong> field, type the name for your secret. For this exercise, we'll use <code>MY_TOKEN</code>.</p>
</li>
<li>
<p>In the <strong>Secret</strong> field, paste the personal access token you generated previously.</p>
</li>
<li>
<p>Click <strong>Add secret</strong>.</p>
</li>
</ol>
<p>Your secret is now safely encrypted and ready to use!</p>
<h3><a href="#5-referencing-the-token-in-our-action">5. Referencing the token in our action</a></h3>
<p>Now we can update the YAML workflow file to use the token and test it works.</p>
<ol>
<li>
<p>Navigate back to your repository. If you're in your repository's settings, you can click </p>
</li>
<li>
<p>Navigate to the YAML workflow file by clicking <code>.github/workflows</code> in the list of files.</p>
</li>
<li>
<p>Open the workflow file by clicking <code>comment.yml</code> in the list of files.</p>
</li>
<li>
<p>To start editing the workflow file, at the top-right, click </p>
</li>
<li>
<p>On line 13, <code>GH_TOKEN: ""</code>, replace the empty quotes with <code>${{ secrets.MY_TOKEN }}</code>. This will reference the repository secret we added previously.</p>
<pre><code><span>GH_TOKEN:</span> <span>${{</span> <span>secrets.MY_TOKEN</span> <span>}}</span>
</code></pre>
</li>
<li>
<p>To commit the change, at the top-right, click <strong>Commit changes...</strong></p>
</li>
<li>
<p>In the "Commit changes" dialog, edit "Commit message" to reflect the change we're making. For example, you could enter "Updating workflow to use repository secret".</p>
</li>
<li>
<p>Make sure "Commit directly to the <code>main</code> branch" is selected.</p>
</li>
<li>
<p>Click <strong>Commit changes</strong>.</p>
</li>
</ol>
<h3><a href="#6-testing-out-the-token-and-workflow">6. Testing out the token and workflow</a></h3>
<p>We should be all set now! Let's go ahead and test the workflow.</p>
<ol>
<li>
<p>Under your repository name, click </p>
<div><picture><source><img src="/assets/cb-51267/images/help/repository/repo-tabs-issues-global-nav-update.png" alt='Screenshot of the main page of a repository. In the horizontal navigation bar, a tab, labeled "Issues," is outlined in dark orange.' width="1440" height="115"></source></picture></div>
</li>
<li>
<p>Click <strong>New issue</strong>.</p>
</li>
<li>
<p>Under "Add a title", you can type any title you like.</p>
</li>
<li>
<p>Under "Add a description", in the text area, type <code>Hello</code>.</p>
</li>
<li>
<p>Beneath the text area, click <strong>Create</strong>.</p>
</li>
</ol>
<p>Once the workflow has had time to complete, you should see a new comment appear. The comment will be authored by yourself, as we're using your token, and contain a greeting in return.</p>
<h2><a href="#next-steps">Next steps</a></h2>
<p>For a more in-depth dive into secret scanning and push protection, you can complete the <a href="https://github.com/skills/introduction-to-secret-scanning/tree/main">Introduction to secret scanning</a> course in GitHub Skills.</p>
<p>Another important part of code security is learning how to identify and patch code vulnerabilities in your projects. See <a href="/en/get-started/learning-to-code/finding-and-fixing-your-first-code-vulnerability">Finding and fixing your first code vulnerability</a>.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>