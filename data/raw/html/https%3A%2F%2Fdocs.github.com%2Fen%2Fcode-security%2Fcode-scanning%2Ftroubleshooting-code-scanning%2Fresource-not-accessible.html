<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Secure coding" href="/en/code-security">Secure coding</a><span>/</span>
</li>
<li>
<a title="Code scanning" href="/en/code-security/code-scanning">Code scanning</a><span>/</span>
</li>
<li>
<a title="Troubleshooting code scanning" href="/en/code-security/code-scanning/troubleshooting-code-scanning">Troubleshooting code scanning</a><span>/</span>
</li>
<li><a title="Resource not accessible" href="/en/code-security/code-scanning/troubleshooting-code-scanning/resource-not-accessible">Resource not accessible</a></li>
</ul></nav></div>
<div>
<div><div><h1>Error: 403 "Resource not accessible by integration"</h1></div></div>
<div><div><p>This error may be seen on pull requests created by Dependabot and can be resolved in a couple of different ways.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#about-this-error"><div><span>About this error</span></div></a></li>
<li><a href="#confirming-the-cause-of-the-error"><div><span>Confirming the cause of the error</span></div></a></li>
<li><a href="#fixing-the-problem"><div><span>Fixing the problem</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<div>
<p>
This troubleshooting article is <em>only</em> relevant if you're seeing this error with Dependabot. If you see this error with other GitHub products and have difficulty troubleshooting it, you can contact GitHub Support. For more information, see <a href="/en/support/contacting-github-support">Contacting GitHub Support</a>.</p>
</div>
<h2><a href="#about-this-error">About this error</a></h2>
<pre><code>403: Resource not accessible by integration
</code></pre>
<p>Dependabot is considered untrusted when it triggers a workflow run, if the workflow will run with read-only scopes.</p>
<h2><a href="#confirming-the-cause-of-the-error">Confirming the cause of the error</a></h2>
<p>If you're using Dependabot in your code scanning workflow, investigate the scope it's using.</p>
<p>Uploading code scanning results for a branch usually requires the <code>security-events: write</code> scope. However, code scanning always allows the uploading of results when the <code>pull_request</code> event triggers the action run. This is why, for Dependabot branches, we recommend you use the <code>pull_request</code> event instead of the <code>push</code> event.</p>
<h2><a href="#fixing-the-problem">Fixing the problem</a></h2>
<p>You can run on pushes to the default branch and any other important long-running branches, as well as pull requests opened against this set of branches:</p>
<pre><code><span>on:</span>
  <span>push:</span>
    <span>branches:</span>
      <span>-</span> <span>main</span>
  <span>pull_request:</span>
    <span>branches:</span>
      <span>-</span> <span>main</span>
</code></pre>
<p>Alternatively, you can run on all pushes except for Dependabot branches:</p>
<pre><code><span>on:</span>
  <span>push:</span>
    <span>branches-ignore:</span>
      <span>-</span> <span>'dependabot/**'</span>
  <span>pull_request:</span>
</code></pre>
<p>For more information about editing the CodeQL workflow file, see <a href="/en/code-security/code-scanning/creating-an-advanced-setup-for-code-scanning/customizing-your-advanced-setup-for-code-scanning#editing-a-code-scanning-workflow">Customizing your advanced setup for code scanning</a>.</p>
<h3><a href="#analysis-still-failing-on-the-default-branch">Analysis still failing on the default branch</a></h3>
<p>If the CodeQL analysis workflow still fails on a commit made on the default branch, you need to check:</p>
<ul>
<li>Whether Dependabot authored the commit</li>
<li>Whether the pull request that includes the commit has been merged using <code>@dependabot squash and merge</code>
</li>
</ul>
<p>This type of merge commit is authored by Dependabot and therefore, any workflows running on the commit will have read-only permissions. If you enabled code scanning and Dependabot security updates or version updates on your repository, we recommend you avoid using the Dependabot <code>@dependabot squash and merge</code> command. Instead, you can enable auto-merge for your repository. This means that pull requests will be automatically merged when all required reviews are met and status checks have passed. For more information about enabling auto-merge, see <a href="/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request#enabling-auto-merge">Automatically merging a pull request</a>.</p>
</div></div></div>
</div>
</div></main>
</div></body></html>