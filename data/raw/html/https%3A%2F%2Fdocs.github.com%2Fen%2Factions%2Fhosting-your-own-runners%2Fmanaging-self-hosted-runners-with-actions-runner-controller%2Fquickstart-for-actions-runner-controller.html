<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="GitHub Actions" href="/en/actions">GitHub Actions</a><span>/</span>
</li>
<li>
<a title="Self-hosted runners" href="/en/actions/hosting-your-own-runners">Self-hosted runners</a><span>/</span>
</li>
<li>
<a title="Actions Runner Controller" href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller">Actions Runner Controller</a><span>/</span>
</li>
<li><a title="Quickstart" href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/quickstart-for-actions-runner-controller">Quickstart</a></li>
</ul></nav></div>
<div>
<div><div><h1>Quickstart for Actions Runner Controller</h1></div></div>
<div><div><p>Try out Actions Runner Controller in 5 minutes.</p></div></div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#introduction"><div><span>Introduction</span></div></a></li>
<li><a href="#prerequisites"><div><span>Prerequisites</span></div></a></li>
<li><a href="#installing-actions-runner-controller"><div><span>Installing Actions Runner Controller</span></div></a></li>
<li><a href="#configuring-a-runner-scale-set"><div><span>Configuring a runner scale set</span></div></a></li>
<li><a href="#using-runner-scale-sets"><div><span>Using runner scale sets</span></div></a></li>
<li><a href="#next-steps"><div><span>Next steps</span></div></a></li>
<li><a href="#legal-notice"><div><span>Legal notice</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<p><a href="#legal-notice">Legal notice</a></p>
<h2><a href="#introduction">Introduction</a></h2>
<p>Actions Runner Controller (ARC) is a Kubernetes operator that orchestrates and scales self-hosted runners for GitHub Actions. For more information, see <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/">Operator pattern</a> in the Kubernetes documentation.</p>
<p>With ARC, you can create runner scale sets that automatically scale based on the number of workflows running in your repository, organization, or enterprise. Because controlled runners can be ephemeral and based on containers, new runner instances can scale up or down rapidly and cleanly. For more information about autoscaling, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners/autoscaling-with-self-hosted-runners">Autoscaling with self-hosted runners</a>.</p>
<p>You can set up ARC on Kubernetes using Helm, then create and run a workflow that uses runner scale sets. For more information about runner scale sets, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/deploying-runner-scale-sets-with-actions-runner-controller#runner-scale-set">Deploying runner scale sets with Actions Runner Controller</a>.</p>
<h2><a href="#prerequisites">Prerequisites</a></h2>
<p>In order to use ARC, ensure you have the following.</p>
<ul>
<li>
<p>A Kubernetes cluster</p>
<ul>
<li>
<p>For a managed cloud environment, you can use AKS. For more information, see <a href="https://azure.microsoft.com/en-us/products/kubernetes-service">Azure Kubernetes Service</a> in the Azure documentation.</p>
</li>
<li>
<p>For a local setup, you can use minikube or kind. For more information, see <a href="https://minikube.sigs.k8s.io/docs/start/">minikube start</a> in the minikube documentation and <a href="https://kind.sigs.k8s.io/">kind</a> in the kind documentation.</p>
<div>
<p>
OpenShift clusters are currently unsupported.</p>
</div>
</li>
</ul>
</li>
<li>
<p>Helm 3</p>
<ul>
<li>For more information, see <a href="https://helm.sh/docs/intro/install/">Installing Helm</a> in the Helm documentation.</li>
</ul>
</li>
<li>
<p>While it is not required for ARC to be deployed, we recommend ensuring you have implemented a way to collect and retain logs from the controller, listeners, and ephemeral runners before deploying ARC in production workflows.</p>
</li>
</ul>
<h2><a href="#installing-actions-runner-controller">Installing Actions Runner Controller</a></h2>
<ol>
<li>
<p>To install the operator and the custom resource definitions (CRDs) in your cluster, do the following.</p>
<ol>
<li>In your Helm chart, update the <code>NAMESPACE</code> value to the location you want your operator pods to be created. This namespace must allow access to the Kubernetes API server.</li>
<li>Install the Helm chart.</li>
</ol>
<p>The following example installs the latest version of the chart. To install a specific version, you can pass the <code>--version</code> argument along with the version of the chart you wish to install. You can find the list of releases in the <a href="https://github.com/actions/actions-runner-controller/pkgs/container/actions-runner-controller-charts%2Fgha-runner-scale-set-controller">GitHub Container Registry</a>.</p>
<div>
<header><span>Bash</span><pre>NAMESPACE="arc-systems"
helm install arc \
    --namespace "${NAMESPACE}" \
    --create-namespace \
    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set-controller
</pre></header><pre><code>NAMESPACE=<span>"arc-systems"</span>
helm install arc \
    --namespace <span>"<span>${NAMESPACE}</span>"</span> \
    --create-namespace \
    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set-controller
</code></pre>
</div>
<p>For additional Helm configuration options, see <a href="https://github.com/actions/actions-runner-controller/blob/master/charts/gha-runner-scale-set-controller/values.yaml"><code>values.yaml</code></a> in the ARC documentation.</p>
</li>
<li>
<p>To enable ARC to authenticate to GitHub, generate a personal access token (classic). For more information, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/authenticating-to-the-github-api#deploying-using-personal-access-token-classic-authentication">Authenticating to the GitHub API</a>.</p>
</li>
</ol>
<h2><a href="#configuring-a-runner-scale-set">Configuring a runner scale set</a></h2>
<ol>
<li>
<p>To configure your runner scale set, run the following command in your terminal, using values from your ARC configuration.</p>
<p>When you run the command, keep the following in mind.</p>
<ul>
<li>
<p>Update the <code>INSTALLATION_NAME</code> value carefully. You will use the installation name as the value of <code>runs-on</code> in your workflows. For more information, see <a href="/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idruns-on">Workflow syntax for GitHub Actions</a>.</p>
</li>
<li>
<p>Update the <code>NAMESPACE</code> value to the location you want the runner pods to be created.</p>
</li>
<li>
<p>Set <code>GITHUB_CONFIG_URL</code> to the URL of your repository, organization, or enterprise. This is the entity that the runners will belong to.</p>
</li>
<li>
<p>This example command installs the latest version of the Helm chart. To install a specific version, you can pass the <code>--version</code> argument with the version of the chart you wish to install. You can find the list of releases in the <a href="https://github.com/actions/actions-runner-controller/pkgs/container/actions-runner-controller-charts%2Fgha-runner-scale-set">GitHub Container Registry</a>.</p>
<div>
<ul>
<li>As a security best practice, create your runner pods in a different namespace than the namespace containing your operator pods.</li>
<li>As a security best practice, create Kubernetes secrets and pass the secret references. Passing your secrets in plain text via the CLI can pose a security risk. For more information, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/deploying-runner-scale-sets-with-actions-runner-controller">Deploying runner scale sets with Actions Runner Controller</a>.</li>
</ul>
</div>
<div>
<header><span>Bash</span><pre>INSTALLATION_NAME="arc-runner-set"
NAMESPACE="arc-runners"
GITHUB_CONFIG_URL="https://github.com/&lt;your_enterprise/org/repo&gt;"
GITHUB_PAT="&lt;PAT&gt;"
helm install "${INSTALLATION_NAME}" \
    --namespace "${NAMESPACE}" \
    --create-namespace \
    --set githubConfigUrl="${GITHUB_CONFIG_URL}" \
    --set githubConfigSecret.github_token="${GITHUB_PAT}" \
    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set
</pre></header><pre><code>INSTALLATION_NAME=<span>"arc-runner-set"</span>
NAMESPACE=<span>"arc-runners"</span>
GITHUB_CONFIG_URL=<span>"https://github.com/&lt;your_enterprise/org/repo&gt;"</span>
GITHUB_PAT=<span>"&lt;PAT&gt;"</span>
helm install <span>"<span>${INSTALLATION_NAME}</span>"</span> \
    --namespace <span>"<span>${NAMESPACE}</span>"</span> \
    --create-namespace \
    --<span>set</span> githubConfigUrl=<span>"<span>${GITHUB_CONFIG_URL}</span>"</span> \
    --<span>set</span> githubConfigSecret.github_token=<span>"<span>${GITHUB_PAT}</span>"</span> \
    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set
</code></pre>
</div>
<p>For additional Helm configuration options, see <a href="https://github.com/actions/actions-runner-controller/blob/master/charts/gha-runner-scale-set/values.yaml"><code>values.yaml</code></a> in the ARC documentation.</p>
</li>
</ul>
</li>
<li>
<p>From your terminal, run the following command to check your installation.</p>
<div>
<header><span>Bash</span><pre>helm list -A
</pre></header><pre><code>helm list -A
</code></pre>
</div>
<p>You should see an output similar to the following.</p>
<pre><code>NAME            NAMESPACE       REVISION        UPDATED                                 STATUS          CHART                                       APP VERSION
arc             arc-systems     1               2023-04-12 11:45:59.152090536 +0000 UTC deployed        gha-runner-scale-set-controller-0.4.0       0.4.0
arc-runner-set  arc-runners     1               2023-04-12 11:46:13.451041354 +0000 UTC deployed        gha-runner-scale-set-0.4.0                  0.4.0
</code></pre>
</li>
<li>
<p>To check the manager pod, run the following command in your terminal.</p>
<div>
<header><span>Bash</span><pre>kubectl get pods -n arc-systems
</pre></header><pre><code>kubectl get pods -n arc-systems
</code></pre>
</div>
<p>If everything was installed successfully, the status of the pods shows as <strong>Running</strong>.</p>
<pre><code>NAME                                                   READY   STATUS    RESTARTS   AGE
arc-gha-runner-scale-set-controller-594cdc976f-m7cjs   1/1     Running   0          64s
arc-runner-set-754b578d-listener                       1/1     Running   0          12s
</code></pre>
</li>
</ol>
<p>If your installation was not successful, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/troubleshooting-actions-runner-controller-errors">Troubleshooting Actions Runner Controller errors</a> for troubleshooting information.</p>
<h2><a href="#using-runner-scale-sets">Using runner scale sets</a></h2>
<p>Now you will create and run a simple test workflow that uses the runner scale set runners.</p>
<ol>
<li>
<p>In a repository, create a workflow similar to the following example. The <code>runs-on</code> value should match the Helm installation name you used when you installed the autoscaling runner set.</p>
<p>For more information on adding workflows to a repository, see <a href="/en/actions/quickstart#creating-your-first-workflow">Quickstart for GitHub Actions</a>.</p>
<div>
<header><span>YAML</span><pre>name: Actions Runner Controller Demo
on:
  workflow_dispatch:

jobs:
  Explore-GitHub-Actions:
    # You need to use the INSTALLATION_NAME from the previous step
    runs-on: arc-runner-set
    steps:
    - run: echo "ðŸŽ‰ This job uses runner scale set runners!"
</pre></header><pre><code><span>name:</span> <span>Actions</span> <span>Runner</span> <span>Controller</span> <span>Demo</span>
<span>on:</span>
  <span>workflow_dispatch:</span>

<span>jobs:</span>
  <span>Explore-GitHub-Actions:</span>
    <span># You need to use the INSTALLATION_NAME from the previous step</span>
    <span>runs-on:</span> <span>arc-runner-set</span>
    <span>steps:</span>
    <span>-</span> <span>run:</span> <span>echo</span> <span>"ðŸŽ‰ This job uses runner scale set runners!"</span>
</code></pre>
</div>
</li>
<li>
<p>Once you've added the workflow to your repository, manually trigger the workflow. For more information, see <a href="/en/actions/managing-workflow-runs/manually-running-a-workflow">Manually running a workflow</a>.</p>
</li>
<li>
<p>To view the runner pods being created while the workflow is running, run the following command from your terminal.</p>
<div>
<header><span>Bash</span><pre>kubectl get pods -n arc-runners
</pre></header><pre><code>kubectl get pods -n arc-runners
</code></pre>
</div>
<p>A successful output will look similar to the following.</p>
<pre><code>NAMESPACE     NAME                                                  READY   STATUS    RESTARTS      AGE
arc-runners   arc-runner-set-rmrgw-runner-p9p5n                     1/1     Running   0             21s
</code></pre>
</li>
</ol>
<h2><a href="#next-steps">Next steps</a></h2>
<p>Actions Runner Controller can help you efficiently manage your GitHub Actions runners. Ready to get started? Here are some helpful resources for taking your next steps with ARC:</p>
<ul>
<li>For detailed authentication information, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/authenticating-to-the-github-api">Authenticating to the GitHub API</a>.</li>
<li>For help using ARC runners in your workflows, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/using-actions-runner-controller-runners-in-a-workflow">Using Actions Runner Controller runners in a workflow</a>.</li>
<li>For deployment information, see <a href="/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/deploying-runner-scale-sets-with-actions-runner-controller">Deploying runner scale sets with Actions Runner Controller</a>.</li>
</ul>
<h2><a href="#legal-notice">Legal notice</a></h2>
<p>Portions have been adapted from <a href="https://github.com/actions/actions-runner-controller/">https://github.com/actions/actions-runner-controller/</a> under the Apache-2.0 license:</p>
<pre><code>Copyright 2019 Moto Ishizawa

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
</div></div></div>
</div>
</div></main>
</div></body></html>