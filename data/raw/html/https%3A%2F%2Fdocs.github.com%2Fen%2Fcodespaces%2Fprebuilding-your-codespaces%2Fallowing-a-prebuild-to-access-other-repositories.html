<html><body><div>
<main><div>
<div><nav><ul>
<li>
<a title="Codespaces" href="/en/codespaces">Codespaces</a><span>/</span>
</li>
<li>
<a title="Prebuilding your codespaces" href="/en/codespaces/prebuilding-your-codespaces">Prebuilding your codespaces</a><span>/</span>
</li>
<li><a title="Allow external repo access" href="/en/codespaces/prebuilding-your-codespaces/allowing-a-prebuild-to-access-other-repositories">Allow external repo access</a></li>
</ul></nav></div>
<div>
<div><div><h1>Allowing a prebuild to access other repositories</h1></div></div>
<div>
<div><p>You can permit your prebuild to access other GitHub repositories so that it can be built successfully.</p></div>
<div><div>
<div><h2>Who can use this feature?</h2></div>
<div><div><p>People with admin access to a repository can configure prebuilds for the repository.</p></div></div>
<div><div>
<p>Repository-level settings for GitHub Codespaces are available for all repositories owned by personal accounts. <br><br></p>
<p>For repositories owned by organizations, repository-level settings for GitHub Codespaces are available for organizations on GitHub Team and GitHub Enterprise plans. To access the settings, the organization or its parent enterprise must have added a payment method and set a spending limit for GitHub Codespaces. For more information, see <a href="/en/codespaces/managing-codespaces-for-your-organization/choosing-who-owns-and-pays-for-codespaces-in-your-organization">Choosing who owns and pays for codespaces in your organization</a> and <a href="/en/get-started/learning-about-github/githubs-plans">GitHubâ€™s plans</a>.</p>
</div></div>
</div></div>
</div>
<div>
<h2>In this article</h2>
<nav><ul>
<li><a href="#allowing-a-prebuild-read-access-to-external-resources"><div><span>Allowing a prebuild read access to external resources</span></div></a></li>
<li><a href="#allowing-a-prebuild-write-access-to-external-resources"><div><span>Allowing a prebuild write access to external resources</span></div></a></li>
<li><a href="#further-reading"><div><span>Further reading</span></div></a></li>
</ul></nav>
</div>
<div><div><div>
<p>By default, the GitHub Actions workflow for a prebuild configuration can only access its own repository contents. Your project may use additional resources, located elsewhere, to build the development environment.</p>
<h2><a href="#allowing-a-prebuild-read-access-to-external-resources">Allowing a prebuild read access to external resources</a></h2>
<p>You can configure read access to other GitHub repositories, with the same repository owner, by specifying permissions in the <code>devcontainer.json</code> file used by your prebuild configuration. For more information, see <a href="/en/codespaces/managing-your-codespaces/managing-repository-access-for-your-codespaces">Managing access to other repositories within your codespace</a>.</p>
<div>
<ul>
<li>You can only authorize read permissions in this way, and the owner of the target repository must be the same as the owner of the repository for which you're creating a prebuild. For example, if you're creating a prebuild configuration for the <code>octo-org/octocatrepository</code>, then you'll be able to grant read permissions for other repositories, such as <code>octo-org/octodemo</code>, if this is specified in the <code>devcontainer.json</code> file, and provided you have the permissions yourself.</li>
<li>You can't use wildcards to specify repositories. You must define permissions for each repository for which you want to grant access.</li>
</ul>
</div>
<p>When you create or edit a prebuild configuration for a <code>devcontainer.json</code> file that sets up read access to other repositories with the same repository owner, you'll be prompted to grant these permissions when you click <strong>Create</strong> or <strong>Update</strong>. For more information, see <a href="/en/codespaces/prebuilding-your-codespaces/configuring-prebuilds#configuring-prebuilds">Configuring prebuilds</a>.</p>
<h2><a href="#allowing-a-prebuild-write-access-to-external-resources">Allowing a prebuild write access to external resources</a></h2>
<p>If your project requires write access to resources, or if the external resources reside in a repository with a different owner than the repository for which you are creating a prebuild configuration, you can use a personal access token to grant this access.</p>
<p>You will need to create a new personal account and then use this account to create a personal access token (classic) with the appropriate scopes.</p>
<ol>
<li>
<p>Create a new personal account on GitHub.</p>
<div>
<p>
Although you can generate the personal access token (classic) using your existing personal account, we strongly recommend creating a new account with access only to the target repositories required for your scenario. This is because the access token's <code>repository</code> permission grants access to all of the repositories that the account has access to. For more information, see <a href="/en/get-started/start-your-journey/creating-an-account-on-github">Creating an account on GitHub</a> and <a href="/en/actions/security-guides/security-hardening-for-github-actions#considering-cross-repository-access">Security hardening for GitHub Actions</a>.</p>
</div>
</li>
<li>
<p>Give the new account read access to the required repositories. For more information, see <a href="/en/organizations/managing-user-access-to-your-organizations-repositories/managing-repository-roles/managing-an-individuals-access-to-an-organization-repository">Managing an individual's access to an organization repository</a>.</p>
</li>
<li>
<p>While signed into the new account, create a personal access token (classic) with the <code>repo</code> scope. Optionally, if the prebuild will need to download packages from the GitHub Container registry, also select the <code>read:packages</code> scope. For more information, see <a href="/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens">Managing your personal access tokens</a>.</p>
<div><picture><source><img src="/assets/cb-82382/images/help/codespaces/prebuilds-select-scopes.png" alt='Screenshot of the "Select scopes" configuration options for a personal access token (classic), with the "repo" and "read:packages" scopes selected.' width="659" height="391"></source></picture></div>
<p>If the prebuild will use a package from the GitHub Container registry, you will need to either grant the new account access to the package or configure the package to inherit the access permissions of the repository you are prebuilding. For more information, see <a href="/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility">Configuring a package's access control and visibility</a>.</p>
</li>
<li>
<p>Copy the token string. You will assign this to a Codespaces repository secret.</p>
</li>
<li>
<p>Sign back into the account that has admin access to the repository.</p>
</li>
<li>
<p>In the repository for which you want to create GitHub Codespaces prebuilds, create a new Codespaces repository secret called <code>CODESPACES_PREBUILD_TOKEN</code>, giving it the value of the token you created and copied. For more information, see <a href="/en/codespaces/managing-codespaces-for-your-organization/managing-development-environment-secrets-for-your-repository-or-organization#adding-secrets-for-a-repository">Managing development environment secrets for your repository or organization</a>.</p>
</li>
</ol>
<p>The personal access token will be used for all subsequent prebuilds created for your repository. Unlike other Codespaces repository secrets, the <code>CODESPACES_PREBUILD_TOKEN</code> secret is only used for prebuilding and will not be available for use in codespaces created from your repository.</p>
<h2><a href="#further-reading">Further reading</a></h2>
<ul>
<li><a href="/en/codespaces/prebuilding-your-codespaces/configuring-prebuilds">Configuring prebuilds</a></li>
<li><a href="/en/codespaces/troubleshooting/troubleshooting-prebuilds">Troubleshooting prebuilds</a></li>
</ul>
</div></div></div>
</div>
</div></main>
</div></body></html>